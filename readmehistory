2026-02-22  • Ticketing task list حالت extend با متن پیام: لیست تسک تیکتینگ (ticketing/task/list) دارای ردیف بازشونده شد تا متن پیام (title و htmlBody) در حالت extend نمایش داده شود. دسکتاپ: دکمه‌های Maximize/Minimize، multiTemplateDataRows، ستون expandedDetail با شناسه، عنوان و متن پیام (safeHtml)؛ موبایل: در بخش expanded نمایش title و htmlBody. کلید TICKETING.TASK_MESSAGE در تمام i18n.
2026-02-22  • Ticketing answer list حالت extend detail: لیست پاسخ تیکتینگ (ticketing/answer/list) دارای ردیف بازشونده شد. دسکتاپ: دکمه‌های Maximize/Minimize، multiTemplateDataRows، ستون expandedDetail با نمایش htmlBody (safeHtml)؛ موبایل: نمایش htmlBody در بخش expanded. کلید TICKETING.ANSWER_BODY در تمام i18n. مستند در Cursor.TicketingAnswerExtend.plan.md.
2026-02-22  • Ticketing task list حالت expireDate: ستون «تاریخ انقضا» (expireDate) به لیست تسک تیکتینگ اضافه شد. در list.component.ts ستون expireDate به tabledisplayedColumnsSource و tabledisplayedColumnsMobileSource؛ در list.component.html ستون matColumnDef="expireDate" با sort و localeDate؛ در list.mobile.component.html بلوک نمایش expireDate با آیکن fa-calendar-xmark.
2026-02-22  • Ticketing task widget: نمایش هشدار Popup (toast warning) زمانی که تیکت خوانده‌نشده وجود دارد. تزریق CmsToastrService در widget.component.ts؛ پراپرتی unreadWarningShown برای نمایش یک‌بار در هر لود؛ کلیدهای MESSAGE.Unread_tickets_warning و TITLE.Unread_tickets_warning در تمام فایل‌های i18n (fa, en, ar, de, es, fr, ja, tr, zh). مستند در Cursor.TicketingTaskWidgetUnread.plan.md.
2026-02-22  • Ticketing FAQ list موبایل: حذف select تغییر وضعیت رکورد (cmsRecordStatusSelfSave) از list.mobile.component.html؛ در حالت موبایل فقط آیکن recordStatus نمایش داده می‌شود، بدون دراپ‌داون ویرایش درون‌خطی.
2026-02-22  • Ticketing FAQ list حالت extend: لیست FAQ تیکتینگ (ticketing/faq/list) دارای حالت بازشونده (extend) شد تا کاربر معمولی بدون دسترسی ویز با کلیک روی ردیف بتواند سوال و پاسخ را در همان لیست ببیند. در دسکتاپ: اضافه شدن ستون‌های expandedTitle و expandedDetail، سه ردیف (expandedTitle، main، expandedDetail) با کلاس ntk-row-expanded و دکمه‌های Maximize/Minimize؛ در موبایل: غنی‌سازی محتوای بازشونده با نمایش سوال و پاسخ. مستند در Cursor.TicketingFaqExtend.plan.md.
2026-02-22  • Shared آیکن‌ها (ادامه): یکسان‌سازی fa fa-* به fa-solid در تمام کامپوننت‌های shared (selectorها، cms-search-list، progress-spinner، cms-site-*-view، cms-guide-notice، cms-export-*، cms-enum-*، cms-data-*، cms-360-*، cms-form-*، cms-confirmation-dialog، cms-action-button-reload، cms-link-to، cms-show-key، cms-bankpayment-transaction-info). نام‌های FA6 (circle-info، circle-question، square-check، triangle-exclamation، circle-exclamation، circle-check) اعمال شد.
2026-02-22  • environments آیکن پرچم زبان: در environment.ts و environment.prod.ts مسیر آیکن‌های پرچم (languages[].flag) یکسان‌سازی شد (حذف ./ از ابتدای مسیر)، توضیح فارسی برای مسیر SVGها اضافه شد؛ همهٔ مسیرها به فایل‌های موجود در src/assets/media/flags/ اشاره دارند.
2026-02-22  • آیکن‌های list (پلن یکپارچه): فهرست کامل ۶۷ فایل اصلاح‌شده در Cursor.EstatePropertyListIcons.plan.md ثبت شد؛ بازبینی تأیید کرد در list/** و shared (cms-html-list) دیگر fa fa-* باقی نمانده (Part 7 / Result 5).
2026-02-22  • Plan OnActionButton CtrlKey (ادامه): SMS outbox-task-scheduler (۵ متد navigate)، api-path (onActionButtonEditRow)؛ Estate property-type-usage (ContentDetailList)، property-type-landuse (ContentDetailList، ContentList) با event + ctrlKey و $event. Result 6 در Cursor.OnActionButtonCtrlKey.plan.md.
2026-02-22  • Plan OnActionButton CtrlKey (ادامه): SMS log outbox (onActionButtonDetailRow، onActionButtonPriceServicesList) و inbox (onActionButtonSendMessage) با event + ctrlKey و $event در list/mobile HTML. Result 5 در Cursor.OnActionButtonCtrlKey.plan.md.
2026-02-22  • Plan OnActionButton CtrlKey (ادامه): تکمیل core-token — notification، notification-log، micro-service، micro-service-log، activation (ViewUserRow، ViewSiteRow)؛ auth-user و auth-user-log (ViewUserRow، ViewMemberRow، ViewSiteRow، ViewDeviceRow + اصلاح linkMemberId). همه با event/ctrlKey و $event در HTML. Result 4 در Cursor.OnActionButtonCtrlKey.plan.md.
2026-02-22  • Plan OnActionButton CtrlKey (ادامه): Link-management billboard (NewRow، EditRow، Log) و accounting (AccountingDetail)؛ core-token userBadLogin (ViewUserRow، ViewMemberRow، ViewSiteRow، ViewDeviceRow) — event و ctrlKey و $event. اصلاح شرط ViewMemberRow به linkMemberId. Result 3 در Cursor.OnActionButtonCtrlKey.plan.md.
2026-02-22  • Plan OnActionButton CtrlKey (ادامه): File-manager (content)، web-designer (intro، page-template، page-dependency)، hyper-shop (category)، donate (target، target-period، sponser)، member (property-detail، property-detail-group) — اضافه شدن event و ctrlKey به متدهای دارای router.navigate و $event در تمپلیت‌ها. Result 2 در Cursor.OnActionButtonCtrlKey.plan.md.
2026-02-22  • Plan OnActionButton CtrlKey (اجرا): مرحله ۱ (Ticketing) و بخشی از مرحله ۳ انجام شد. در task/list: onActionTaskRowClick و onActionButtonAnswerList با event/ctrlKey؛ در departemen/list: FaqList، TemplateList، LogList، TaskList؛ در departemenOperator و departemenLog: NewRow، EditRow، DeleteRow. در polling/content: NewRow، EditRow، Results. در link-management/target: NewRow، EditRow، Log. در تمام تمپلیت‌های مربوط $event اضافه شد. CRM بدون تغییر (همه دیالوگ). نتیجه در Cursor.OnActionButtonCtrlKey.plan.md (Result 1).
2026-02-22  • Plan OnActionButton CtrlKey: فایل Cursor.OnActionButtonCtrlKey.plan.md ایجاد شد. هدف: استفاده یکسان از event?.ctrlKey در تمام onActionButton* صفحات لیست (Ctrl+Click → تب جدید با window.open؛ وگرنه router.navigate). الگوی مرجع news/content/list؛ فهرست ماژول‌های دارای ctrlKey، فهرست کامپوننت‌های نیازمند اضافه‌کردن ctrlKey و دستور اجرا در ۶ مرحله (Ticketing، CRM، Web-designer، Polling/Member/Link-management، Hyper-shop/File-manager/Estate/Donate/Data-provider، Core-token/Core-log/Transaction-assistant/News، SMS). فهرست Planها در Cursor.PlansFilesIndex.md به‌روز شد.
2026-02-22  • News content list دکمه کامنت: دکمه «کامنت» در لیست محتوای اخبار به‌اشتباه دیالوگ «اضافه کردن کامنت» (CmsDataCommentComponent) را باز می‌کرد. با override متد onActionButtonComment در news/content/list/list.component.ts هدایت به صفحه لیست کامنت‌ها با فیلتر ContentId (/news/comment/:ContentId) انجام می‌شود؛ مسیرهای comment و comment/:ContentId به routes.normal.ts و routes.mobile.ts ماژول news اضافه شد؛ در تمپلیت دسکتاپ و موبایل پارامتر $event به onActionButtonComment برای پشتیبانی Ctrl+Click (تب جدید) اضافه شد.
2026-02-22  • Planها و اصلاحات: فهرست یکپارچه Planها و فایل‌ها در Cursor.PlansFilesIndex.md ایجاد شد. اعمال کلاس ntk-row-expanded به ۵ فایل دارای expandedDetail (user-list، quick-list، سه responsible-user-list) طبق Cursor.ExpandedRowFix.plan.md؛ Result 2b در همان Plan ثبت شد.
2026-02-22  • Ticketing task list: هدایت به صفحه ticketing با دبل‌کلیک روی ردیف؛ رویداد از (click) به (dblclick) برای onActionTaskRowClick در list.component.html و list.mobile.component.html. مستند در Cursor.TicketingTaskClick.plan.md (Result 2).
2026-02-22  • Ticketing task list: با کلیک روی ردیف تیکت، هدایت به صفحه ticketing (answer/LinkTaskId/:id) با هدر تسک و پیام‌های ارسالی/دریافتی. متد onActionTaskRowClick در list.component.ts؛ به‌روزرسانی (click) در list.component.html و list.mobile.component.html. مستند در Cursor.TicketingTaskClick.plan.md.
2026-02-22  • آیکن‌های list (ادامه): یکسان‌سازی سینتکس قدیمی fa fa-* به fa-solid در کل پروژه — shared (cms-html-list، cms-html-list-mobile): fa-bars و fa-times-circle؛ تمام list و responsible-user-list و user-list: fa-bars؛ sms client-application-permission: fa-question-circle → fa-circle-question؛ core-module-log list.mobile: fa-ellipsis-v → fa-ellipsis-vertical. جزئیات در Cursor.EstatePropertyListIcons.plan.md (Part 6).
2026-02-22  • لیست‌های پروژه (ادامه بررسی): جستجوی مجدد fa-light/fa-regular/fa-bulls-eye/fa-pen-field در list و list.mobile؛ مورد جدیدی یافت نشد؛ نتیجه در Cursor.EstatePropertyListIcons.plan.md (Part 5 / Result 3).
2026-02-22  • لیست‌های پروژه (list/list.mobile): یکسان‌سازی آیکن‌های غیرفعال در کل پروژه — estate/log/customer-order: fa-light fa-clapperboard-play → fa-solid fa-clapperboard؛ donate/target، link-management/billboard-pattern، estate/data/property/quick-list: fa-bullseye-pointer → fa-solid fa-bullseye؛ article/comment و blog/comment: fa-light/fa-solid fa-pen-field → fa-solid fa-pen-to-square.
2026-02-22  • Estate property list آیکن دکمه‌های «تبلیغات» و «ارسال پیامک به مشتری‌های منطبق»: جایگزینی fa-light fa-message-lines با fa-solid fa-sms و fa-bullseye-pointer با fa-solid fa-bullseye در list و list.mobile (estate/data/property/list) تا آیکن‌ها در مودال اکشن نمایش داده شوند.
2026-02-22  • Estate property list آیکن دکمه‌ها: بررسی تمام آیکن‌های list.component.html (estate/data/property/list). اصلاح باگ mat-icon فیلد caseCode (حذف matPrefix تکراری، استفاده از matSuffix برای دکمه پاک کردن). گزارش در Cursor.EstatePropertyListIcons.plan.md ثبت شد.
2025-12-23 09:30:00  • بازطراحی UI موبایل ماژول SMS با الهام از AppKit: به‌روزرسانی styles.mobile.scss با پالت highlight قرمز، گرادینت و کارت‌های شیشه‌ای، بهبود دکمه‌ها، لیست‌ها (badge وضعیت، سایه جدید)، فرم‌ها (سطح کارت و blur) و دکمه‌های اکشن/سوایپ با گرادینت‌های هماهنگ؛ هدر اکشن‌ها، ناحیه pull-to-refresh و فوتر شیشه‌ای/گرادینت شدند؛ تنظیم padding واکنش‌گرا فرم در موبایل‌های کوچک.
2025-12-23 09:50:00  • SMS Log Outbox Mobile List: بازطراحی list.mobile.component با تیتر مسیر API، نمایش آیکن وضعیت recordStatus، شناسه ردیف، تاریخ ارسال/ایجاد/به‌روزرسانی و اکشن‌های مشاهده/جزئیات/ویرایش/حذف روی کارت موبایل هماهنگ با تم جدید.
2025-12-23 10:05:00  • SmsLogOutBoxListMobileComponent: در onActionSelectorSelect پس از ریست FilterModel فیلترهای ورودی Route (LinkApiPathId/LinkApiNumberId/linkSiteId) دوباره اعمال شد تا لیست موبایل در کانتکست مسیر/سایت درست باقی بماند. UI موبایل کارت‌های Outbox بهبود یافت (نمایش ApiNumber، پیام، وضعیت، شناسه و تاریخ‌ها)؛ در نسخه دسکتاپ نیز هدر اکشن با badge عنوان SMS Log هماهنگ با تم جدید شد.
2025-12-23 08:06:08  • CRM Supplier Price List: رفع خطاهای کامپوننت‌های supplier-price-list (add و list) با افزودن آن‌ها به CrmMainModule declarations، افزودن MatCardModule و MatProgressSpinnerModule به imports ماژول، افزودن روت‌های supplier-price-list به routes.normal.ts و routes.mobile.ts، به‌روزرسانی template برای استفاده از @if به جای *ngIf (Angular modern control flow)، افزودن standalone: false به کامپوننت‌ها، حذف CrmConfigurationService (وجود نداشت)، رفع مسیرهای import در routes، و رفع خطای type casting در add component.
2025-12-22 14:15:00  • Estate Add/Edit Mobile: ایجاد کامپوننت‌های add/edit موبایل برای estate/main (activity-type ✅, ads-type ✅, contract-type ✅, property-type-usage ✅, property-type-landuse ✅) طبق الگوی SMS. هر کامپوننت شامل هدر موبایل با دکمه back، فرم با استایل موبایل، app-progress-spinner و دکمه‌های footer است. روت‌های موبایل و EstateMainModule به‌روزرسانی شدند.
2025-12-22 14:00:00  • Estate Mobile تکمیل: تکمیل پیاده‌سازی موبایل برای تمام ماژول‌های estate (main, data, log, config). همه کامپوننت‌های لیست موبایل از الگوی SMS پیروی می‌کنند و شامل app-progress-spinner، app-cms-search-list، translate pipe و MESSAGE.NoRecord هستند. روت‌های موبایل و ماژول‌ها به‌روزرسانی شدند. کامپوننت category-rack UI خاص خود را دارد و نیاز به تغییر ندارد.
2025-12-22 13:57:03  • Estate Main Mobile UI بهبود: بهبود کامپوننت‌های موبایل estate/main (ads-type, contract-type, property-type-usage, property-type-landuse) با افزودن app-progress-spinner، app-cms-search-list، translate pipe و MESSAGE.NoRecord برای هماهنگی کامل با الگوی SMS. همه کامپوننت‌های estate/main اکنون از الگوی SMS پیروی می‌کنند.
2025-12-22 13:55:43  • Estate Mobile UI بهبود: بهبود کامپوننت‌های موبایل estate/data (property, property-ads, property-company, property-supplier) و estate/main (activity-type) با افزودن app-progress-spinner، app-cms-search-list، translate pipe و MESSAGE.NoRecord برای هماهنگی کامل با الگوی SMS.
2025-12-22 13:53:48  • Estate Data & Log Mobile: ایجاد کامپوننت‌های موبایل برای estate/data (property, property-ads, billboard, property-company, property-supplier, property-project) و estate/log (property-history, customer-order, customer-order-result, property-expert-price) با الگوی SMS؛ هر کامپوننت از desktop component ارث‌بری می‌کند و شامل هدر موبایل، جستجو، لیست کارت‌محور و استایل‌های موبایل است. روت‌های موبایل و ماژول‌ها به‌روزرسانی شدند (EstateDataModule و EstateLogModule با TranslateModule و CUSTOM_ELEMENTS_SCHEMA).
2025-12-22 11:30:00  • Estate ماژول: تکمیل مسیرهای mobile برای estate-main (افزودن category-rack با کامپوننت موبایل) و estate-log (مسیرهای property-history با فیلترهای جدید و افزودن/ویرایش موبایل، مسیرهای customer-order add/edit و responsibleUserId/recordstatus دو پارامتری) مشابه پوشش موبایل ماژول SMS.
2025-12-22 11:45:00  • EstateConfig: جداسازی روت موبایل/نرمال مشابه سایر ماژول‌ها (انتخاب بر اساس window.innerWidth) و ایجاد فایل‌های routes.mobile/normal با پوشش full مسیرهای config (mainadmin, site, checkuser, checksite) برای حالت موبایل.
2025-12-22 12:10:00  • EstateMain: ایجاد کامپوننت‌های لیست نسخه موبایل برای همه مسیرهای main (activity-type, ads-type, contract-type, property-type-usage, property-type-landuse, account-agency, account-expert, account-agency-ads, property-detail-group, property-detail, category-zone) و اتصال آن‌ها در routes.mobile؛ بدنه این کامپوننت‌ها از همان template نسخه دسکتاپ استفاده می‌کند تا رفتار و منطق مشترک باشد.
2025-12-22 12:40:00  • EstateMain Mobile UI: بازطراحی نسخه موبایل لیست‌های اصلی estate (property-type-usage, property-type-landuse, activity-type, ads-type, contract-type, account-agency, account-expert, account-agency-ads, property-detail-group, property-detail, category-zone) بر اساس الگوی SMS؛ برای هر لیست کلاس موبایل از کلاس دسکتاپ ارث‌بری می‌کند و فایل‌های list.mobile.component.html/scss با هدر موبایل، دکمه‌های جستجو/بارگذاری مجدد، لیست کارت‌محور و حالت بدون رکورد پیاده‌سازی شده‌اند. EstateMainModule نیز برای این کامپوننت‌ها و وابستگی‌های لازم (TranslateModule و schemas) به‌روزرسانی شد.
2025-12-17 10:53:38  • SmsLogOutBoxTaskSchedulerListComponent: افزودن ستون queueAllowNextRun در جدول و بخش جزییات، که بر اساس scheduleSendAllowNextRun به‌علاوه differenceClientDateTime (offset زمانی کلاینت بر حسب ms) محاسبه و با لوله localeDateTime نمایش داده می‌شود.
2025-12-17 10:23:10  • SmsMainApiPathPermissionListComponent و SmsMainApiNumberPermissionListComponent: افزودن ستون‌های جدید linkCoreUserId (با نمایش نام کاربر از طریق cmsuserinfo) و linkCoreUserGroupId در جدول اصلی و موبایل، بر اساس مقادیر fieldsInfo و مدل‌های Permission.
2025-12-17 10:09:54  • رفع خطای Cannot read properties of null (reading 'id') در فایل‌های tree.component.html: تغییر dataModelSelect.id به dataModelSelect?.id در تمام template‌ها (70 فایل) و تغییر نوع dataModelSelect به | null در تمام فایل‌های TypeScript (67 فایل) برای پشتیبانی از null.
2025-12-17 10:05:50  • به‌روزرسانی متد onActionSelect در تمام فایل‌های tree.component.ts: در صورتی که مقدار انتخاب شده با مقدار قبلی برابر باشد (بر اساس id)، مقدار dataModelSelect را null می‌کند. این تغییر در 70 فایل tree.component.ts اعمال شد.
2025-12-12  • transaction-assistant module: added direct Angular Material imports (table, paginator, sort, slide-toggle, menu) and RouterModule. Added CUSTOM_ELEMENTS_SCHEMA/NO_ERRORS_SCHEMA for template lint noise. Added TRANSACTIONASSISTANT route translation keys to all language files (fa, en, ar, es, de, zh, ja, fr, tr). Added shared CmsHtmlFormComponent and exported via SharedModule to fix app-cms-html-form bindings; form includes submit/cancel buttons and respects formInfo/options.
2026-01-15 09:16:42  • DataProvider SourcePublicConfig mobile list: fixed action handler bindings to use onActionButtonNewRow/EditRow/DeleteRow method names to match component API and remove template errors.
2026-01-15 11:58:56  • Client-application firewallAllowIP fix: رفع مشکل همگام‌سازی فیلد firewallAllowIP با firewallAllowIPList در کامپوننت‌های SMS و DataProvider. در SMS، فیلد firewallAllowIP با لیست سینک می‌شود (join با کاما) و در edit component، مقدار firewallAllowIP از سرور خوانده شده و به لیست اضافه می‌شود. در DataProvider، فقط با firewallAllowIPList کار می‌شود چون فیلد firewallAllowIP وجود ندارد.
2026-01-15 11:44:58  • Client-application fields: افزودن فیلدهای fromDate, expireDate, description, apiKey, firewallAllowIP و firewallAllowIPList به کامپوننت‌های SmsMainClientApplicationAddComponent, SmsMainClientApplicationEditComponent, DataProviderClientApplicationAddComponent و DataProviderClientApplicationEditComponent. فیلدهای تاریخ با mat-datepicker و calendarHeaderComponent، description با textarea، apiKey و firewallAllowIP با input text و firewallAllowIPList با لیست badge و دکمه‌های اضافه/حذف پیاده‌سازی شدند. متدهای onActionAddFirewallIP و onActionRemoveFirewallIP برای مدیریت لیست IP اضافه شدند.
2026-01-15 10:47:18  • SMS client-application: تکمیل فرم‌های دسکتاپ add/edit با افزودن selectorهای linkUserId و linkSiteId مشابه الگوی data-provider و نسخه موبایل.
2026-01-15 11:15:00  • Client-application fields: افزودن فیلدهای fromDate, expireDate, description, apiKey, firewallAllowIP و firewallAllowIPList به کامپوننت‌های SmsMainClientApplicationAddComponent, SmsMainClientApplicationEditComponent, DataProviderClientApplicationAddComponent و DataProviderClientApplicationEditComponent. فیلدهای تاریخ با mat-datepicker، description با textarea، apiKey و firewallAllowIP با input text و firewallAllowIPList با لیست badge و دکمه‌های اضافه/حذف پیاده‌سازی شدند.
2026-02-10 11:05:00  • Footer Padding with footerOnPage: در اسکریپت‌های سراسری front (custom.ts و custom.js) منطق card_extender به‌روزرسانی شد تا هر زمان المنت #footer-bar روی صفحه وجود داشته باشد (footerOnPage فعال است)، ارتفاع فوتر محاسبه و مقدار آن به‌صورت padding-bottom روی المنت #page اعمال شود. این کار باعث می‌شود محتوای صفحات در همه ماژول‌ها زیر فوتر ثابت قرار نگیرد و همیشه بالای آن تمام شود، بدون ایجاد خطای lint یا تغییر در منطق بیزینسی دیگر بخش‌ها.
2026-02-10 15:02:23  • Sms Send Message Mobile: نوار دکمه‌های پایین صفحه در send-message.mobile.component از حالت شناور (position: fixed) به یک نوار اکشن معمولی داخل بدنه صفحه تبدیل شد؛ استایل `.cms-m-floating-send-bar` با پس‌زمینه کارت، شعاع گوشه بزرگ و سایه ملایم به‌روزرسانی شد و padding پایین محتوای `.cms-m-content` متناسب با نوار جدید تنظیم شد تا UX موبایل در کنار footer سراسری هماهنگ و بدون هم‌پوشانی باشد.
