<div *ngIf="optionsData.data.show" class="card card-style">
  <div class="content mb-0">
    <div class="d-flex justify-content-between flex-wrap">
      <div class="justify-content-start">
        <a
          *ngIf="formSubmited"
          class="btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-highlight"
          style="float: left"
          (click)="onActionCopied()"
          [cdkCopyToClipboard]="filters | json"
        >
          <i class="flaticon2-copy"></i>
          <span
            [ngClass]="showLabel ? 'submited' : ''"
            class="popuptext"
            id="myPopup"
            >کپی در حافظه</span
          >
        </a>
        <a
          *ngIf="allowSaveSearch"
          href="javascript:void(0)"
          (click)="onActionSaveRules()"
          class="btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-green"
          style="float: left"
          >{{ "ACTION.SAVE" | translate }}</a
        >
        <a
          *ngIf="allowLoadSearch"
          href="javascript:void(0)"
          (click)="onActionLoadRules()"
          class="btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-highlight"
          style="float: left"
          >{{ "ACTION.LOAD" | translate }}</a
        >
        <a
          *ngIf="allowLoadSearch"
          href="javascript:void(0)"
          (click)="onActionRemoveRules()"
          class="btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-highlight"
          style="float: left"
          >{{ "ACTION.REMOVE" | translate }}</a
        >
      </div>
      <div class="justify-content-end">
        <a
          href="javascript:void(0)"
          (click)="onSubmit()"
          class="btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-highlight"
          >{{ "ACTION.SEARCH" | translate }}</a
        >
      </div>
    </div>
    <div class="row m-0">
      <ngx-ntk-query-builder
        [(ngModel)]="query"
        [fieldMap]="fieldMap"
        [language]="lang"
      >
      </ngx-ntk-query-builder>
      <hr />
      <div class="row">
        @if (optionsData.data.filterActionSearchRecordStatusShow) {
          <div
            class="col-lg-6 col-sm-12 input-style has-borders no-icon input-style-always-active validate-field mb-4"
          >
            <!-- RecordStatus Field -->

            <label
              for="cms-RecordStatusEnum-selector-{{ id }}"
              class="color-highlight"
              >{{ "TITLE.RecordStatus" | translate }}</label
            >
            <select
              [(ngModel)]="
                optionsData.data.filterModelContent
                  .filterActionSearchRecordStatus
              "
              name="cms-RecordStatusEnum-selector-{{ id }}"
              #RecordStatus="ngModel"
              ngClass="cms-RecordStatusEnum-selector-{{
                optionsData.data.filterModelContent
                  .filterActionSearchRecordStatus ?? 0
              }}"
              class="form-control validate-name"
              [required]="false"
              [attr.disabled]="false"
              id="cms-RecordStatusEnum-selector-{{ id }}"
            >
              <option [ngValue]="null">-----</option>
              <option
                *ngFor="
                  let item of dataModelResultRecordStatus.listItems;
                  index as i
                "
                [ngValue]="item.value"
              >
                {{ item.description }}
              </option>
            </select>
            <span><i class="fa fa-chevron-down"></i></span>
            <i
              *ngIf="
                optionsData.data.filterModelContent
                  .filterActionSearchRecordStatus > 0
              "
              class="fa fa-times action color-red-dark"
              (click)="
                optionsData.data.filterModelContent.filterActionSearchRecordStatus =
                  null
              "
            ></i>
          </div>
        }
        @if (optionsData.data.filterActionSearchLinkUserIdShow) {
          <div class="col-lg-6 col-sm-12">
            <!-- LinkUserId Field -->
            <app-cms-user-selector
              (optionChange)="
                this.optionsData.data.filterModelContent.filterActionSearchLinkUserId =
                  $event?.id ?? 0
              "
              [optionPlaceholder]="'TITLE.USER' | translate"
            >
            </app-cms-user-selector>
          </div>
        }
        @if (optionsData.data.filterActionSearchLinkSiteIdShow) {
          <div class="col-lg-6 col-sm-12">
            <!-- LinkSiteId Field -->
            <app-cms-site-selector
              (optionChange)="
                this.optionsData.data.filterModelContent.filterActionSearchLinkSiteId =
                  $event?.id ?? 0
              "
              [optionPlaceholder]="'TITLE.SITE' | translate"
            >
            </app-cms-site-selector>
          </div>
        }
      </div>

      <ng-content></ng-content>
    </div>
    <div class="d-flex justify-content-between flex-wrap">
      <div class="justify-content-start">
        <a
          *ngIf="formSubmited"
          class="btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-highlight"
          style="float: left"
          (click)="onActionCopied()"
          [cdkCopyToClipboard]="filters | json"
        >
          <i class="flaticon2-copy"></i>
          <span
            [ngClass]="showLabel ? 'submited' : ''"
            class="popuptext"
            id="myPopup"
            >کپی در حافظه</span
          >
        </a>
        <a
          *ngIf="allowSaveSearch"
          href="javascript:void(0)"
          (click)="onActionSaveRules()"
          class="btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-green"
          style="float: left"
          >{{ "ACTION.SAVE" | translate }}</a
        >
        <a
          *ngIf="allowLoadSearch"
          href="javascript:void(0)"
          (click)="onActionLoadRules()"
          class="btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-highlight"
          style="float: left"
          >{{ "ACTION.LOAD" | translate }}</a
        >
        <a
          *ngIf="allowLoadSearch"
          href="javascript:void(0)"
          (click)="onActionRemoveRules()"
          class="btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-highlight"
          style="float: left"
          >{{ "ACTION.REMOVE" | translate }}</a
        >
      </div>
      <div class="justify-content-end">
        <a
          href="javascript:void(0)"
          (click)="onSubmit()"
          class="btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-highlight"
          >{{ "ACTION.SEARCH" | translate }}</a
        >
      </div>
    </div>
  </div>
</div>
