<div class="cms-html-list-mobile-container" #topList>
  @if (optionTreeDisplay) {
    <div
      [ngClass]="
        viewTree
          ? 'cms-html-list-mobile-tree cms-html-list-mobile-tree-active'
          : 'cms-html-list-mobile-tree cms-html-list-mobile-tree-hidden'
      "
      >
      <ng-content select="[cms-tree]"></ng-content>
    </div>
  }

  <div class="cms-html-list-mobile-content">
    @if (optionsListInfoAreaId?.length > 0) {
      <app-progress-spinner
        [optionsInfoAreaId]="optionsListInfoAreaId"
        >
      </app-progress-spinner>
    }

    @if (optionHeaderDisplay) {
      <div class="cms-html-list-mobile-header">
        <ng-content select="[cms-header]"></ng-content>
        <ng-content select="[cms-action-header]"></ng-content>
        <div class="cms-html-list-mobile-header-actions">
          <div class="cms-html-list-mobile-header-actions-end">
            <ng-content select="[cms-action-header-end]"></ng-content>
          </div>
          <div class="cms-html-list-mobile-header-actions-start">
            <ng-content select="[cms-action-header-start]"></ng-content>
            @if (optionActionMainDisplay) {
              <a
                (click)="actionViewMenuMain()"
                class="cms-html-list-mobile-action-button cms-html-list-mobile-header-button"
                role="button"
                [attr.aria-label]="optionMenuMainTitle || ('TITLE.OperationMenu' | translate)"
                >
                <i
                  class="fa fa-bars"
                  [ngClass]="getIconRotationClass(viewMenuMain)"
                ></i>
              </a>
            }
          </div>
        </div>
      </div>
    }

    <ng-content select="[cms-action-area]"></ng-content>

    @if (optionHeaderDisplay || optionActionMainDisplay) {
      <div class="cms-html-list-mobile-divider"></div>
    }

    <div class="cms-html-list-mobile-body">
      <ng-content select="[cms-body]"></ng-content>
    </div>

    @if (optionFooterDisplay) {
      <div class="cms-html-list-mobile-footer">
        <ng-content select="[cms-message]"></ng-content>
        <ng-content select="[cms-footer]"></ng-content>
      </div>
    }
  </div>
</div>

@if (optionTreeDisplay) {
  <div class="cms-html-list-mobile-fixed-button cms-html-list-mobile-tree-button">
    <a
      (click)="actionViewTree()"
      class="cms-html-list-mobile-action-button cms-html-list-mobile-fixed-button-item"
      role="button"
      [attr.aria-label]="optionCategoryTitle || ('TITLE.Category' | translate)"
      >
      <span class="cms-html-list-mobile-button-text">{{ optionCategoryTitle }}</span>
      <i
        class="fa fa-bars"
        [ngClass]="getIconRotationClass(viewTree)"
      ></i>
    </a>
  </div>
}

@if (optionActionMainDisplay) {
  <div [ngClass]="getActionMainButtonClasses()">
    <a
      (click)="actionViewMenuMain()"
      class="cms-html-list-mobile-action-button cms-html-list-mobile-fixed-button-item"
      role="button"
      [attr.aria-label]="optionMenuMainTitle || ('TITLE.OperationMenu' | translate)"
      >
      <span class="cms-html-list-mobile-button-text">{{ optionMenuMainTitle }}</span>
      <i
        class="fa fa-bars"
        [ngClass]="getIconRotationClass(viewMenuMain)"
      ></i>
    </a>
  </div>
}

@if (optionActionRowDisplay) {
  <div [ngClass]="getActionRowButtonClasses()">
    <a
      (click)="actionViewMenuItemRow()"
      class="cms-html-list-mobile-action-button cms-html-list-mobile-fixed-button-item"
      role="button"
      [attr.aria-label]="optionSelectRowItemTitle"
      >
      <span class="cms-html-list-mobile-button-text">{{
        optionSelectRowItemTitle | truncate: [20, "..."]
      }}</span>
      <i
        class="fa fa-bars"
        [ngClass]="getIconRotationClass(viewMenuItemRow)"
      ></i>
    </a>
  </div>
}

<div
  class="menu menu-box-modal rounded-m shadow-xl cms-html-list-mobile-menu-modal"
  [ngClass]="viewMenuMain ? 'menu-active' : ''"
  >
  <div class="menu-title">
    @if (optionMenuMainTitle?.length > 0) {
      <p class="color-highlight">{{ optionMenuMainTitle }}</p>
    }
    <h1></h1>
    <a (click)="actionViewMenuMain(false)" class="close-menu">
      <i class="fa fa-times-circle"></i>
    </a>
  </div>
  <div class="divider divider-margins"></div>
  <div class="row text-center">
    <ng-content select="[cms-action-main]"></ng-content>
    @if (optionActionButtonMemoDisplay) {
      <div class="col-4">
        <a
          type="button"
          class="btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-highlight cms-html-list-mobile-action-button"
          (click)="onActionButtonMemo()"
          role="button"
          [attr.aria-label]="'ACTION.MEMO' | translate"
          >
          <i class="fa-regular fa-file-lines font-18 cms-html-list-mobile-action-icon"></i>
          <br />
        </a>
        <p class="font-11 text-center opacity-70">
          {{ "ACTION.MEMO" | translate }}
        </p>
      </div>
    }
    <div class="col-4">
      <a
        type="button"
        class="btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-highlight cms-html-list-mobile-action-button"
        (click)="onActionButtonExport()"
        role="button"
        [attr.aria-label]="'ACTION.EXPORTFILE' | translate"
        >
        <i class="fa-solid fa-cloud-arrow-down font-18 cms-html-list-mobile-action-icon"></i>
        <br />
      </a>
      <p class="font-11 text-center opacity-70">
        {{ "ACTION.EXPORTFILE" | translate }}
      </p>
    </div>
  </div>
</div>

<div
  class="menu menu-box-modal rounded-m shadow-xl cms-html-list-mobile-menu-modal"
  [ngClass]="viewMenuItemRow ? 'menu-active' : ''"
  >
  <div class="menu-title">
    @if (optionSelectRowItemTitle?.length > 0) {
      <p class="color-highlight">{{ optionSelectRowItemTitle }}</p>
    }
    <h1></h1>
    <a (click)="actionViewMenuItemRow(false)" class="close-menu">
      <i class="fa fa-times-circle"></i>
    </a>
  </div>
  <div class="divider divider-margins"></div>
  <div class="row text-center">
    <ng-content select="[cms-action-row]"></ng-content>
    @if (optionActionButtonPrintRowDisplay) {
      <div class="col-4">
        <a
          type="button"
          class="btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-highlight cms-html-list-mobile-action-button"
          (click)="onActionButtonPrintRow()"
          role="button"
          [attr.aria-label]="'ACTION.PRINT' | translate"
          >
          <i class="fa-solid fa-print font-18 cms-html-list-mobile-action-icon"></i>
          <br />
        </a>
        <p class="font-11 text-center opacity-70">
          {{ "ACTION.PRINT" | translate }}
        </p>
      </div>
    }
    @if (optionActionButtonMemoRowDisplay) {
      <div class="col-4">
        <a
          type="button"
          class="btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-highlight cms-html-list-mobile-action-button"
          (click)="onActionButtonMemoRow()"
          role="button"
          [attr.aria-label]="'ACTION.MEMO' | translate"
          >
          <i class="fa-regular fa-file-lines font-18 cms-html-list-mobile-action-icon"></i>
          <br />
        </a>
        <p class="font-11 text-center opacity-70">
          {{ "ACTION.MEMO" | translate }}
        </p>
      </div>
    }
  </div>
</div>

<app-cms-guide-notice
  [(optionView)]="viewGuideNotice"
  [Key]="optionGuideNoticeKey"
  [svg]="'assets/media/svg/icons/General/Notifications1.svg'"
  >
</app-cms-guide-notice>
