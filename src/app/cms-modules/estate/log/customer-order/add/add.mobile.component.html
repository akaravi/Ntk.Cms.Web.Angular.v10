<div class="cms-m-body loader-container">
  <app-progress-spinner [optionsInfoAreaId]="constructorInfoAreaId">
  </app-progress-spinner>

  <!-- mobile -->
  @if (stepContent === 'mobile') {
    <div class="cms-m-container">
      <div class="cms-m-filter">
        <div class="cms-m-container-header">
          <div class="cms-m-form-label">
            {{ "TITLE.ENTER_MOBILE_FOR_ORDER" | translate }}
          </div>
        </div>
        <div class="cms-m-container-body">
          <div style="margin-top: 100px">
            <label class="cms-m-form-label">
              {{ "TITLE.MOBILE_PHONE_NUMBER" | translate }}
            </label>
            <input
              type="text"
              [(ngModel)]="dataModel.contactMobiles"
              name="dataModel.contactMobiles"
              autocomplete="off"
              #contactMobiles
              class="cms-m-form-input"
              maxlength="11"
              placeholder="09120000000"
              pattern="09[0-9]{2}[0-9]{3}[0-9]{4}"
              />
            @if (
              dataModel?.contactMobiles?.length > 0 &&
              !regeMobile.test(dataModel.contactMobiles)
              ) {
              <div
                class="cms-m-form-label"
                >
                {{ "TITLE.MOBILE_FORMAT_INCORRECT" | translate }}
              </div>
            }
          </div>
        </div>
        <div class="cms-m-container-footer">
          <button
            (click)="onFormCancel()"
            class="btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-gray"
            >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 24 24"
              stroke-width="1.5"
              stroke="currentColor"
              class="w-6 h-6"
              >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                d="M13.5 4.5L21 12m0 0l-7.5 7.5M21 12H3"
                />
            </svg>
            <span>{{ "ACTION.CANCEL" | translate }}</span>
          </button>
          @if (
            dataModel?.contactMobiles?.length > 0 &&
            regeMobile.test(dataModel.contactMobiles)
            ) {
            <button
              type="button"
              (click)="onActoinSelectStepNext('orderType')"
              class="cms-m-button"
              >
              <span>{{ "TITLE.NEXT" | translate }}</span>
              <svg
                xmlns="http://www.w3.org/2000/svg"
                fill="none"
                viewBox="0 0 24 24"
                stroke-width="1.5"
                stroke="currentColor"
                class="w-6 h-6"
                >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  d="M10.5 19.5L3 12m0 0l7.5-7.5M3 12h18"
                  />
              </svg>
            </button>
          }
        </div>
      </div>
    </div>
  }
  <!-- mobile -->

  <!-- ordertype -->
  @if (stepContent === 'orderType') {
    <div class="cms-m-container">
      <div class="cms-m-filter">
        <div class="cms-m-container-header">
          <div class="cms-m-form-label">
            {{ "TITLE.PLEASE_SPECIFY_REQUEST" | translate }}
          </div>
        </div>
        <div class="cms-m-container-body">
          @if (dataModelContractTypeResult?.listItems.length > 0) {
            <div>
              @for (state of dataModelContractTypeResult.listItems; track state) {
                <button
                  type="button"
                  class="btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-highlight"
              [class]="
                state.id === dataModel.linkContractTypeId
                  ? 'cms-m-form-option-select'
                  : 'cms-m-form-option'
              "
                  (click)="onActionSelectorContarctType(state)"
                  >
                  {{ state.orderTitle }}
                </button>
              }
            </div>
          }
        </div>
        <div class="cms-m-container-footer">
          <button
            (click)="onActoinSelectStepBefor('mobile')"
            class="cms-m-button"
            >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 24 24"
              stroke-width="1.5"
              stroke="currentColor"
              class="w-6 h-6"
              >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                d="M13.5 4.5L21 12m0 0l-7.5 7.5M21 12H3"
                />
            </svg>
            <span>{{ "TITLE.PREVIOUS" | translate }}</span>
          </button>
          @if (dataModel?.linkContractTypeId?.length > 0) {
            <button
              type="button"
              (click)="onActoinSelectStepNext('selectPropertyTypeUsage')"
              class="cms-m-button"
              >
              <span>{{ "TITLE.NEXT" | translate }}</span>
              <svg
                xmlns="http://www.w3.org/2000/svg"
                fill="none"
                viewBox="0 0 24 24"
                stroke-width="1.5"
                stroke="currentColor"
                class="w-6 h-6"
                >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  d="M10.5 19.5L3 12m0 0l7.5-7.5M3 12h18"
                  />
              </svg>
            </button>
          }
        </div>
      </div>
    </div>
  }
  <!-- ordertype -->

  <!-- selectPropertyTypeUsage -->
  @if (stepContent === 'selectPropertyTypeUsage') {
    <div class="cms-m-container">
      <div class="cms-m-filter">
        <div class="cms-m-container-header">
          <div class="cms-m-form-label">
            {{ "TITLE.PLEASE_SPECIFY_PROPERTY_USAGE_TYPE" | translate }}
          </div>
        </div>
        <div class="cms-m-container-body">
          @if (dataModelPropertyTypeUsageResult?.listItems.length > 0) {
            <div>
              @for (state of dataModelPropertyTypeUsageResult.listItems; track state) {
                <button
                  type="button"
                  class="btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-highlight"
              [class]="
                state.id === dataModel.linkPropertyTypeUsageId
                  ? 'cms-m-form-option-select'
                  : 'cms-m-form-option'
              "
              (click)="
                dataModel.linkPropertyTypeUsageId = state.id;
                this.DataGetAllPropertyTypeLanduse()
              "
                  >
                  {{ state.title }}
                </button>
              }
            </div>
          }
        </div>
        <div class="cms-m-container-footer">
          <button
            (click)="onActoinSelectStepBefor('orderType')"
            class="cms-m-button"
            >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 24 24"
              stroke-width="1.5"
              stroke="currentColor"
              class="w-6 h-6"
              >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                d="M13.5 4.5L21 12m0 0l-7.5 7.5M21 12H3"
                />
            </svg>
            <span>{{ "TITLE.PREVIOUS" | translate }}</span>
          </button>
          @if (dataModel?.linkPropertyTypeUsageId?.length > 0) {
            <button
              type="button"
              (click)="onActoinSelectStepNext('selectPropertyTypeLanduse')"
              class="cms-m-button"
              >
              <span>{{ "TITLE.NEXT" | translate }}</span>
              <svg
                xmlns="http://www.w3.org/2000/svg"
                fill="none"
                viewBox="0 0 24 24"
                stroke-width="1.5"
                stroke="currentColor"
                class="w-6 h-6"
                >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  d="M10.5 19.5L3 12m0 0l7.5-7.5M3 12h18"
                  />
              </svg>
            </button>
          }
        </div>
      </div>
    </div>
  }
  <!-- selectPropertyTypeUsage -->

  <!-- selectPropertyTypeLanduse -->
  @if (stepContent === 'selectPropertyTypeLanduse') {
    <div class="cms-m-container">
      <div class="cms-m-filter">
        <div class="cms-m-container-header">
          <div class="cms-m-form-label">
            {{ "TITLE.PLEASE_SPECIFY_PROPERTY_TYPE" | translate }}
          </div>
        </div>
        <div class="cms-m-container-body">
          @if (dataModelPropertyTypeLanduseResult?.listItems.length > 0) {
            <div>
              @for (state of dataModelPropertyTypeLanduseResult.listItems; track state) {
                <button
                  type="button"
                  class="btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-highlight"
              [class]="
                state.id === dataModel.linkPropertyTypeLanduseId
                  ? 'cms-m-form-option-select'
                  : 'cms-m-form-option'
              "
                  (click)="onActionSelectorSelectLanduse(state)"
                  >
                  {{ state.title }}
                </button>
              }
            </div>
          }
        </div>
        <div class="cms-m-container-footer">
          <button
            (click)="onActoinSelectStepBefor('selectPropertyTypeUsage')"
            class="cms-m-button"
            >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 24 24"
              stroke-width="1.5"
              stroke="currentColor"
              class="w-6 h-6"
              >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                d="M13.5 4.5L21 12m0 0l-7.5 7.5M21 12H3"
                />
            </svg>
            <span>{{ "TITLE.PREVIOUS" | translate }}</span>
          </button>
          @if (dataModel?.linkPropertyTypeLanduseId?.length > 0) {
            <button
              type="button"
              (click)="onActoinSelectStepNext('selectYear')"
              class="cms-m-button"
              >
              <span>{{ "TITLE.NEXT" | translate }}</span>
              <svg
                xmlns="http://www.w3.org/2000/svg"
                fill="none"
                viewBox="0 0 24 24"
                stroke-width="1.5"
                stroke="currentColor"
                class="w-6 h-6"
                >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  d="M10.5 19.5L3 12m0 0l7.5-7.5M3 12h18"
                  />
              </svg>
            </button>
          }
        </div>
      </div>
    </div>
  }
  <!-- selectPropertyTypeLanduse -->

  <!-- selectyear -->
  @if (stepContent === 'selectYear') {
    <div class="cms-m-container">
      <div class="cms-m-filter">
        <div class="cms-m-container-header">
          <div class="cms-m-form-label">
            {{ "TITLE.PLEASE_ENTER_PROPERTY_DETAILS" | translate }}
          </div>
        </div>
        <div class="cms-m-container-body">
          <label class="cms-m-form-label">{{ "TITLE.AREA" | translate }}</label>
          <input
            type="number"
            [(ngModel)]="dataModel.area"
            name="dataModel.area"
            class="cms-m-form-input"
            autocomplete="off"
            />
          @if (PropertyTypeSelected?.createdYearActive) {
            <label
              class="cms-m-form-label"
              >{{ "TITLE.CONSTRUCTION_YEAR" | translate }}
            </label>
          }
          @if (PropertyTypeSelected?.createdYearActive) {
            <select
              [(ngModel)]="dataModel.createdYaer"
              name="dataModel.createdYaer"
              class="cms-m-form-input"
              >
              <option value="1402">1402</option>
              <option value="1401">1401</option>
              <option value="1400">1400</option>
              <option value="1399">1399</option>
              <option value="1398">1398</option>
              <option value="1397">1397</option>
              <option value="1396">1396</option>
              <option value="1395">1395</option>
              <option value="1394">1394</option>
              <option value="1393">1393</option>
              <option value="1392">1392</option>
              <option value="1391">1391</option>
              <option value="1390">1390</option>
            </select>
          }
          @if (PropertyTypeSelected?.partitionActive) {
            <label
              class="cms-m-form-label"
              >{{ this.PropertyTypeSelected?.titlePartitionML }}</label
              >
            }
            @if (PropertyTypeSelected?.partitionActive) {
              <input
                type="number"
                [(ngModel)]="dataModel.partition"
                name="dataModel.partition"
                class="cms-m-form-input"
                autocomplete="off"
                />
            }
          </div>
          <div class="cms-m-container-footer">
            <button
              (click)="onActoinSelectStepBefor('selectPropertyTypeLanduse')"
              class="cms-m-button"
              >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                fill="none"
                viewBox="0 0 24 24"
                stroke-width="1.5"
                stroke="currentColor"
                class="w-6 h-6"
                >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  d="M13.5 4.5L21 12m0 0l-7.5 7.5M21 12H3"
                  />
              </svg>
              <span>{{ "TITLE.PREVIOUS" | translate }}</span>
            </button>
            <button
              (click)="onActoinSelectStepNext('selectLocation')"
              class="cms-m-button"
              >
              <span>{{ "TITLE.NEXT" | translate }}</span>
              <svg
                xmlns="http://www.w3.org/2000/svg"
                fill="none"
                viewBox="0 0 24 24"
                stroke-width="1.5"
                stroke="currentColor"
                class="w-6 h-6"
                >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  d="M10.5 19.5L3 12m0 0l7.5-7.5M3 12h18"
                  />
              </svg>
            </button>
          </div>
        </div>
      </div>
    }
    <!-- selectyear -->

    <!-- selectlocation -->
    @if (stepContent === 'selectLocation') {
      <div class="cms-m-container">
        <div class="cms-m-filter">
          <div class="cms-m-container-header">
            <div class="cms-m-form-label">
              {{ "TITLE.PLEASE_SPECIFY_DESIRED_REGION" | translate }}
            </div>
          </div>
          <div class="cms-m-container-body">
            <div>
              <label class="cms-m-form-label"
                >{{ "TITLE.Geographical_Areas" | translate }} :</label
                >
                <app-cms-location-autocomplete
                  (optionChange)="onActionSelectorLocation($event)"
                  [optionSelectForce]="dataModel.linkLocationIds"
                  [optionPlaceholder]="'TITLE.Region' | translate"
                  [optionCssClassInputText]="'cms-m-form-input'"
                  >
                </app-cms-location-autocomplete>
              </div>
            </div>
            <div class="cms-m-container-footer">
              <button
                (click)="onActoinSelectStepBefor('selectYear')"
                class="cms-m-button"
                >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke-width="1.5"
                  stroke="currentColor"
                  class="w-6 h-6"
                  >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    d="M13.5 4.5L21 12m0 0l-7.5 7.5M21 12H3"
                    />
                </svg>
                <span>{{ "TITLE.PREVIOUS" | translate }}</span>
              </button>
              <button
                (click)="onActoinSelectStepNext('result1')"
                class="cms-m-button"
                >
                <span>{{ "TITLE.NEXT" | translate }}</span>
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke-width="1.5"
                  stroke="currentColor"
                  class="w-6 h-6"
                  >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    d="M10.5 19.5L3 12m0 0l7.5-7.5M3 12h18"
                    />
                </svg>
              </button>
            </div>
          </div>
        </div>
      }
      <!-- selectlocation -->

      <!-- result1 -->
      @if (stepContent === 'result1') {
        <div class="cms-m-container">
          <div class="cms-m-filter">
            <div class="cms-m-container-header">
              <div class="cms-m-form-label">{{ "TITLE.RESULT" | translate }}</div>
            </div>
            <div class="cms-m-container-body" style="height: 60%">
              <div class="cms-m-form-label">
                {{ "TITLE.SELECTED_PROPERTY_COUNT" | translate }} :
                {{ this.dataModelEstatePropertyResult.totalRowCount }}
              </div>
              @if (dataModelEstatePropertyResult?.listItems?.length > 0) {
                <div
                  class="cms-form-result"
                  >
                  <ng-container
              [ngTemplateOutletContext]="{
                $implicit: dataModelEstatePropertyResult.listItems,
              }"
                    [ngTemplateOutlet]="estateTemplate"
                    >
                  </ng-container>
                </div>
              }
            </div>
            @if (allowActionSend) {
              <mat-slide-toggle
                [(ngModel)]="dataModelActionSend.actionSendSmsToEstateCustomer"
                name="dataModelActionSend.actionSendSmsToEstateCustomer"
                class="cms-m-actionsend"
                >
                {{ "ACTION.SEND_TO_CLIENT" | translate }}
              </mat-slide-toggle>
            }
            <div class="cms-m-container-footer" style="height: 30%">
              <button
                (click)="onActoinSelectStepBefor('selectLocation')"
                class="cms-m-button"
                >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke-width="1.5"
                  stroke="currentColor"
                  class="w-6 h-6"
                  >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    d="M13.5 4.5L21 12m0 0l-7.5 7.5M21 12H3"
                    />
                </svg>
                <span>{{ "TITLE.PREVIOUS" | translate }}</span>
              </button>
              <button (click)="onActoinSubmit(true)" class="cms-m-button">
                {{ "TITLE.REGISTER" | translate }}
              </button>
              <button
                (click)="onActoinSelectStepNext('selectPrice')"
                class="cms-m-button"
                >
                <span>{{ "TITLE.NEXT" | translate }}</span>
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke-width="1.5"
                  stroke="currentColor"
                  class="w-6 h-6"
                  >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    d="M10.5 19.5L3 12m0 0l7.5-7.5M3 12h18"
                    />
                </svg>
              </button>
            </div>
          </div>
        </div>
      }
      <!-- result1 -->

      <!-- selectprice -->
      @if (stepContent === 'selectPrice') {
        <div class="cms-m-container">
          <div class="cms-m-filter">
            <div class="cms-m-container-header">
              <div class="cms-m-form-label">
                {{ "TITLE.PLEASE_ENTER_PROPERTY_PRICE" | translate }}
              </div>
            </div>
            <div class="cms-m-container-body">
              <div>
                <!-- SalePriceMin Field -->
                @if (contractTypeSelected?.hasSalePrice) {
                  <label
                    class="cms-m-form-label"
                    >{{ contractTypeSelected.titleSalePriceML }}
                    {{ "TITLE.Minimum" | translate }}</label
                    >
                  }
                  @if (contractTypeSelected?.hasSalePrice) {
                    <input
                      class="cms-m-form-input input-ltr-center"
                      [(ngModel)]="dataModel.salePriceMin"
                      name="dataModel.salePriceMin"
                      #SalePriceMin
                      type="text"
                      autocomplete="off"
                      currencyMask
                      />
                  }
                  <!-- RentPriceMin Field -->
                  @if (contractTypeSelected?.hasRentPrice) {
                    <label
                      class="cms-m-form-label"
                      >{{ contractTypeSelected.titleRentPriceML }}
                      {{ "TITLE.Minimum" | translate }}</label
                      >
                    }
                    @if (contractTypeSelected?.hasRentPrice) {
                      <input
                        class="cms-m-form-input input-ltr-center"
                        [(ngModel)]="dataModel.rentPriceMin"
                        name="dataModel.rentPriceMin"
                        #RentPriceMin
                        type="text"
                        autocomplete="off"
                        currencyMask
                        />
                    }
                    <!-- DepositPriceMin Field -->
                    @if (contractTypeSelected?.hasDepositPrice) {
                      <label
                        class="cms-m-form-label"
                        >{{ contractTypeSelected.titleDepositPriceML }}
                        {{ "TITLE.Minimum" | translate }}</label
                        >
                      }
                      @if (contractTypeSelected?.hasDepositPrice) {
                        <input
                          class="cms-m-form-input input-ltr-center"
                          [(ngModel)]="dataModel.depositPriceMin"
                          name="dataModel.depositPriceMin"
                          #DepositPriceMin
                          type="text"
                          autocomplete="off"
                          currencyMask
                          />
                      }
                      <!-- PeriodPriceMin Field -->
                      @if (contractTypeSelected?.hasDepositPrice) {
                        <label
                          class="cms-m-form-label"
                          >{{ contractTypeSelected.titlePeriodPriceML }}
                          {{ "TITLE.Minimum" | translate }}</label
                          >
                        }
                        @if (contractTypeSelected?.hasDepositPrice) {
                          <input
                            class="cms-m-form-input input-ltr-center"
                            [(ngModel)]="dataModel.periodPriceMin"
                            name="dataModel.periodPriceMin"
                            #PeriodPriceMin
                            type="text"
                            autocomplete="off"
                            currencyMask
                            />
                        }
                        <!-- SalePriceMax Field -->
                        @if (contractTypeSelected?.hasSalePrice) {
                          <label
                            class="cms-m-form-label"
                            >
                            {{ contractTypeSelected.titleSalePriceML }}
                            {{ "TITLE.Maximum" | translate }}</label
                            >
                          }
                          @if (contractTypeSelected?.hasSalePrice) {
                            <input
                              class="cms-m-form-input input-ltr-center"
                              [(ngModel)]="dataModel.salePriceMax"
                              name="dataModel.salePriceMax"
                              #SalePriceMax
                              type="text"
                              autocomplete="off"
                              currencyMask
                              />
                          }
                          <!-- RentPriceMax Field -->
                          @if (contractTypeSelected?.hasRentPrice) {
                            <label
                              class="cms-m-form-label"
                              >{{ contractTypeSelected.titleRentPriceML }}
                              {{ "TITLE.Maximum" | translate }}</label
                              >
                            }
                            @if (contractTypeSelected?.hasRentPrice) {
                              <input
                                class="cms-m-form-input input-ltr-center"
                                [(ngModel)]="dataModel.rentPriceMax"
                                name="dataModel.rentPriceMax"
                                #RentPriceMax
                                type="text"
                                autocomplete="off"
                                currencyMask
                                />
                            }
                            <!-- DepositPriceMax Field -->
                            @if (contractTypeSelected?.hasDepositPrice) {
                              <label
                                class="cms-m-form-label"
                                >{{ contractTypeSelected.titleDepositPriceML }}
                                {{ "TITLE.Maximum" | translate }}</label
                                >
                              }
                              @if (contractTypeSelected?.hasDepositPrice) {
                                <input
                                  class="cms-m-form-input input-ltr-center"
                                  [(ngModel)]="dataModel.depositPriceMax"
                                  name="dataModel.depositPriceMax"
                                  #DepositPriceMax
                                  type="text"
                                  autocomplete="off"
                                  currencyMask
                                  />
                              }
                              <!-- PeriodPriceMax Field -->
                              @if (contractTypeSelected?.hasDepositPrice) {
                                <label
                                  class="cms-m-form-label"
                                  >{{ contractTypeSelected.titlePeriodPriceML }}
                                  {{ "TITLE.Maximum" | translate }}</label
                                  >
                                }
                                @if (contractTypeSelected?.hasDepositPrice) {
                                  <input
                                    class="cms-m-form-input input-ltr-center"
                                    [(ngModel)]="dataModel.periodPriceMax"
                                    name="dataModel.periodPriceMax"
                                    #PeriodPriceMax
                                    type="text"
                                    autocomplete="off"
                                    currencyMask
                                    />
                                }
                              </div>
                            </div>
                            <div class="cms-m-container-footer">
                              <button
                                (click)="onActoinSelectStepBefor('selectLocation')"
                                class="cms-m-button"
                                >
                                <svg
                                  xmlns="http://www.w3.org/2000/svg"
                                  fill="none"
                                  viewBox="0 0 24 24"
                                  stroke-width="1.5"
                                  stroke="currentColor"
                                  class="w-6 h-6"
                                  >
                                  <path
                                    stroke-linecap="round"
                                    stroke-linejoin="round"
                                    d="M13.5 4.5L21 12m0 0l-7.5 7.5M21 12H3"
                                    />
                                </svg>
                                <span>{{ "TITLE.PREVIOUS" | translate }}</span>
                              </button>
                              <button
                                (click)="onActoinSelectStepNext('result2')"
                                class="cms-m-button"
                                >
                                <span>{{ "TITLE.NEXT" | translate }}</span>
                                <svg
                                  xmlns="http://www.w3.org/2000/svg"
                                  fill="none"
                                  viewBox="0 0 24 24"
                                  stroke-width="1.5"
                                  stroke="currentColor"
                                  class="w-6 h-6"
                                  >
                                  <path
                                    stroke-linecap="round"
                                    stroke-linejoin="round"
                                    d="M10.5 19.5L3 12m0 0l7.5-7.5M3 12h18"
                                    />
                                </svg>
                              </button>
                            </div>
                          </div>
                        </div>
                      }
                      <!-- selectprice -->

                      <!-- result2 -->
                      @if (stepContent === 'result2') {
                        <div class="cms-m-container">
                          <div class="cms-m-filter">
                            <div class="cms-m-container-header">
                              <div class="cms-m-form-label">{{ "TITLE.RESULT" | translate }}</div>
                            </div>
                            <div class="cms-m-container-body" style="height: 60%">
                              <div class="cms-m-form-label">
                                {{ "TITLE.SELECTED_PROPERTY_COUNT" | translate }} :
                                {{ this.dataModelEstatePropertyResult.totalRowCount }}
                              </div>
                              @if (dataModelEstatePropertyResult?.listItems?.length > 0) {
                                <div
                                  class="cms-form-result"
                                  >
                                  <ng-container
              [ngTemplateOutletContext]="{
                $implicit: dataModelEstatePropertyResult.listItems,
              }"
                                    [ngTemplateOutlet]="estateTemplate"
                                    >
                                  </ng-container>
                                </div>
                              }
                            </div>
                            @if (allowActionSend) {
                              <mat-slide-toggle
                                [(ngModel)]="dataModelActionSend.actionSendSmsToEstateCustomer"
                                name="dataModelActionSend.actionSendSmsToEstateCustomer"
                                class="cms-m-actionsend"
                                >
                                {{ "ACTION.SEND_TO_CLIENT" | translate }}
                              </mat-slide-toggle>
                            }
                            <div class="cms-m-container-footer" style="height: 30%">
                              <button
                                (click)="onActoinSelectStepBefor('selectprice')"
                                class="cms-m-button"
                                >
                                <svg
                                  xmlns="http://www.w3.org/2000/svg"
                                  fill="none"
                                  viewBox="0 0 24 24"
                                  stroke-width="1.5"
                                  stroke="currentColor"
                                  class="w-6 h-6"
                                  >
                                  <path
                                    stroke-linecap="round"
                                    stroke-linejoin="round"
                                    d="M13.5 4.5L21 12m0 0l-7.5 7.5M21 12H3"
                                    />
                                </svg>
                                <span>{{ "TITLE.PREVIOUS" | translate }}</span>
                              </button>
                              <button (click)="onActoinSubmit(true)" class="cms-m-button">
                                {{ "TITLE.REGISTER" | translate }}
                              </button>
                              <button
                                (click)="onActoinSelectStepNext('detail')"
                                class="cms-m-button"
                                >
                                <span>{{ "TITLE.NEXT" | translate }}</span>
                                <svg
                                  xmlns="http://www.w3.org/2000/svg"
                                  fill="none"
                                  viewBox="0 0 24 24"
                                  stroke-width="1.5"
                                  stroke="currentColor"
                                  class="w-6 h-6"
                                  >
                                  <path
                                    stroke-linecap="round"
                                    stroke-linejoin="round"
                                    d="M10.5 19.5L3 12m0 0l7.5-7.5M3 12h18"
                                    />
                                </svg>
                              </button>
                            </div>
                          </div>
                        </div>
                      }
                      <!-- result2 -->

                      <!-- detail -->
                      @if (stepContent === 'detail') {
                        <div class="cms-m-container">
                          <div class="cms-m-filter">
                            <div class="cms-m-container-header">
                              <div class="cms-m-form-label">
                                {{ "TITLE.PLEASE_ENTER_PROPERTY_DETAILS_FULL" | translate }}
                              </div>
                            </div>
                            <div class="cms-m-container-body">
                              <div>
                                <!-- propertyDetailGroups Field -->
                                <mat-accordion class="example-headers-align">
                                  @for (
                                    itemGroup of dataModel.propertyDetailGroups; track
                                    itemGroup; let i = $index) {
                                    <mat-expansion-panel
                                      [expanded]="step === i"
                                      (opened)="setStep(i)"
                                      >
                                      <mat-expansion-panel-header>
                                        <mat-panel-title>
                                          {{ itemGroup.title }}
                                        </mat-panel-title>
                                        <mat-panel-description>
                                          {{ itemGroup.description }}
                                          <mat-icon style="width: 100px">{{
                                            itemGroup.iconFont
                                          }}</mat-icon>
                                        </mat-panel-description>
                                      </mat-expansion-panel-header>
                                      <!-- value-->
                                      @for (itemDetail of itemGroup.propertyDetails; track itemDetail) {
                                        @switch (itemDetail.inputDataType) {
                                          <!-- ngSwitchCase-->
                                          @case (enumInputDataType.String) {
                                            <div
                                              class="ntk-full-width"
                                              >
                                              <i
                                                [ngClass]="itemDetail.iconFont"
                                                [style.color]="itemDetail.iconColor"
                                                aria-hidden="true"
                                                ></i
                                                >&nbsp;
                                                <app-input-string
                                                  [(model)]="propertyDetails[itemDetail.id]"
                        [optionForceUseDefaultValue]="
                          itemDetail.configValueForceUseDefaultValue
                        "
                        [optionMultipleChoice]="
                          itemDetail.configValueMultipleChoice
                        "
                        [optionDefaultValue]="
                          itemDetail.configValueDefaultValues
                        "
                                                  [optionRequired]="itemDetail.required"
                                                  [optionLabel]="itemDetail.title"
                                                  style="color:'{{ itemDetail.iconColor }}';"
                                                  >
                                                </app-input-string>
                                              </div>
                                            }
                                            <!-- ngSwitchCase-->
                                            @case (enumInputDataType.Int) {
                                              <div
                                                class="ntk-full-width"
                                                >
                                                <i
                                                  [ngClass]="itemDetail.iconFont"
                                                  [style.color]="itemDetail.iconColor"
                                                  aria-hidden="true"
                                                  ></i
                                                  >&nbsp;
                                                  <app-input-int
                                                    [(model)]="propertyDetails[itemDetail.id]"
                                                    [optionRequired]="itemDetail.required"
                                                    [optionLabel]="itemDetail.title"
                                                    style="color:'{{ itemDetail.iconColor }}';"
                                                    >
                                                  </app-input-int>
                                                </div>
                                              }
                                              <!-- ngSwitchCase-->
                                              @case (enumInputDataType.Boolean) {
                                                <div
                                                  class="ntk-full-width"
                                                  >
                                                  <i
                                                    [ngClass]="itemDetail.iconFont"
                                                    [style.color]="itemDetail.iconColor"
                                                    aria-hidden="true"
                                                    ></i
                                                    >&nbsp;
                                                    <app-input-boolean
                                                      [(model)]="propertyDetails[itemDetail.id]"
                                                      >{{ itemDetail.title }}
                                                    </app-input-boolean>
                                                  </div>
                                                }
                                                <!-- ngSwitchCase-->
                                                @case (enumInputDataType.Float) {
                                                  <div
                                                    class="ntk-full-width"
                                                    >
                                                    <i
                                                      [ngClass]="itemDetail.iconFont"
                                                      [style.color]="itemDetail.iconColor"
                                                      aria-hidden="true"
                                                      ></i
                                                      >&nbsp;
                                                      <app-input-float
                                                        [(model)]="propertyDetails[itemDetail.id]"
                                                        [optionRequired]="itemDetail.required"
                                                        [optionLabel]="itemDetail.title"
                                                        style="color:'{{ itemDetail.iconColor }}';"
                                                        >
                                                      </app-input-float>
                                                    </div>
                                                  }
                                                  <!-- ngSwitchCase-->
                                                  @case (enumInputDataType.Date) {
                                                    <div
                                                      class="ntk-full-width"
                                                      >
                                                      <i
                                                        [ngClass]="itemDetail.iconFont"
                                                        [style.color]="itemDetail.iconColor"
                                                        aria-hidden="true"
                                                        ></i
                                                        >&nbsp;
                                                        <label style="color:'{{ itemDetail.iconColor }}';">{{
                                                          itemDetail.title
                                                        }}</label>
                                                        <app-input-date
                                                          [(model)]="propertyDetails[itemDetail.id]"
                                                          [optionRequired]="itemDetail.required"
                                                          >
                                                        </app-input-date>
                                                      </div>
                                                    }
                                                    <!-- ngSwitchCase-->
                                                    @case (enumInputDataType.TextArea) {
                                                      <div
                                                        class="ntk-full-width"
                                                        >
                                                        <i
                                                          [ngClass]="itemDetail.iconFont"
                                                          [style.color]="itemDetail.iconColor"
                                                          aria-hidden="true"
                                                          ></i
                                                          >&nbsp;
                                                          <app-input-textarea
                                                            [(model)]="propertyDetails[itemDetail.id]"
                                                            [optionRequired]="itemDetail.required"
                                                            [optionLabel]="itemDetail.title"
                                                            style="color:'{{ itemDetail.iconColor }}';"
                                                            >
                                                          </app-input-textarea>
                                                        </div>
                                                      }
                                                      <!-- ngSwitchCase-->
                                                      @default {
                                                        <div class="ntk-full-width">
                                                          <i
                                                            [ngClass]="itemDetail.iconFont"
                                                            [style.color]="itemDetail.iconColor"
                                                            aria-hidden="true"
                                                            ></i
                                                            >&nbsp;
                                                            <app-input-string
                                                              [(model)]="propertyDetails[itemDetail.id]"
                        [optionForceUseDefaultValue]="
                          itemDetail.configValueForceUseDefaultValue
                        "
                        [optionMultipleChoice]="
                          itemDetail.configValueMultipleChoice
                        "
                        [optionDefaultValue]="
                          itemDetail.configValueDefaultValues
                        "
                                                              [optionRequired]="itemDetail.required"
                                                              [optionLabel]="itemDetail.title"
                                                              style="color:'{{ itemDetail.iconColor }}';"
                                                              >
                                                            </app-input-string>
                                                          </div>
                                                        }
                                                      }
                                                    }
                                                    <mat-action-row>
                                                      @if (i > 0) {
                                                        <button
                                                          type="button"
                                                          class="btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-teal"
                                                          (click)="prevStep()"
                                                          >
                                                          {{ "ACTION.PREVIOUS" | translate }}
                                                        </button>
                                                      }
                                                      @if (i + 1 < dataModel.propertyDetailGroups.length) {
                                                        <button
                                                          type="button"
                                                          class="btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-blue"
                                                          (click)="nextStep()"
                                                          >
                                                          {{ "ACTION.NEXT" | translate }}
                                                        </button>
                                                      }
                                                      @if (i + 1 === dataModel.propertyDetailGroups.length) {
                                                        <button
                                                          type="button"
                                                          class="btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-blue"
                                                          (click)="nextStep()"
                                                          >
                                                          {{ "ACTION.END" | translate }}
                                                        </button>
                                                      }
                                                    </mat-action-row>
                                                  </mat-expansion-panel>
                                                }
                                                <br />
                                              </mat-accordion>
                                            </div>
                                          </div>
                                          <div class="cms-m-container-footer">
                                            <button
                                              (click)="onActoinSelectStepBefor('detail')"
                                              class="cms-m-button"
                                              >
                                              <svg
                                                xmlns="http://www.w3.org/2000/svg"
                                                fill="none"
                                                viewBox="0 0 24 24"
                                                stroke-width="1.5"
                                                stroke="currentColor"
                                                class="w-6 h-6"
                                                >
                                                <path
                                                  stroke-linecap="round"
                                                  stroke-linejoin="round"
                                                  d="M13.5 4.5L21 12m0 0l-7.5 7.5M21 12H3"
                                                  />
                                              </svg>
                                              <span>{{ "TITLE.PREVIOUS" | translate }}</span>
                                            </button>
                                            <button
                                              (click)="onActoinSelectStepNext('result3')"
                                              class="cms-m-button"
                                              >
                                              <span>{{ "TITLE.NEXT" | translate }}</span>
                                              <svg
                                                xmlns="http://www.w3.org/2000/svg"
                                                fill="none"
                                                viewBox="0 0 24 24"
                                                stroke-width="1.5"
                                                stroke="currentColor"
                                                class="w-6 h-6"
                                                >
                                                <path
                                                  stroke-linecap="round"
                                                  stroke-linejoin="round"
                                                  d="M10.5 19.5L3 12m0 0l7.5-7.5M3 12h18"
                                                  />
                                              </svg>
                                            </button>
                                          </div>
                                        </div>
                                      </div>
                                    }
                                    <!-- detail -->

                                    <!-- result3 -->
                                    @if (stepContent === 'result3') {
                                      <div class="cms-m-container">
                                        <div class="cms-m-filter">
                                          <div class="cms-m-container-header">
                                            <div class="cms-m-form-label">{{ "TITLE.RESULT" | translate }}</div>
                                          </div>
                                          <div class="cms-m-container-body" style="height: 60%">
                                            <div class="cms-m-form-label">
                                              {{ "TITLE.SELECTED_PROPERTY_COUNT" | translate }} :
                                              {{ this.dataModelEstatePropertyResult.totalRowCount }}
                                            </div>
                                            @if (dataModelEstatePropertyResult?.listItems?.length > 0) {
                                              <div
                                                class="cms-form-result"
                                                >
                                                <ng-container
              [ngTemplateOutletContext]="{
                $implicit: dataModelEstatePropertyResult.listItems,
              }"
                                                  [ngTemplateOutlet]="estateTemplate"
                                                  >
                                                </ng-container>
                                              </div>
                                            }
                                          </div>
                                          @if (allowActionSend) {
                                            <mat-slide-toggle
                                              [(ngModel)]="dataModelActionSend.actionSendSmsToEstateCustomer"
                                              name="dataModelActionSend.actionSendSmsToEstateCustomer"
                                              class="cms-m-actionsend"
                                              >
                                              {{ "ACTION.SEND_TO_CLIENT" | translate }}
                                            </mat-slide-toggle>
                                          }
                                          <div class="cms-m-container-footer" style="height: 30%">
                                            <button
                                              (click)="onActoinSelectStepBefor('detail')"
                                              class="cms-m-button"
                                              >
                                              <svg
                                                xmlns="http://www.w3.org/2000/svg"
                                                fill="none"
                                                viewBox="0 0 24 24"
                                                stroke-width="1.5"
                                                stroke="currentColor"
                                                class="w-6 h-6"
                                                >
                                                <path
                                                  stroke-linecap="round"
                                                  stroke-linejoin="round"
                                                  d="M13.5 4.5L21 12m0 0l-7.5 7.5M21 12H3"
                                                  />
                                              </svg>
                                              <span>{{ "TITLE.PREVIOUS" | translate }}</span>
                                            </button>
                                            <button (click)="onActoinSubmit(true)" class="cms-m-button">
                                              {{ "TITLE.REGISTER" | translate }}
                                            </button>
                                          </div>
                                        </div>
                                      </div>
                                    }
                                    <!-- result3 -->
                                  </div>

                                  <ng-template let-listItem #estateTemplate>
                                    @for (item of listItem; track item) {
                                      <div style="width: 100%">
                                        <table class="cms-m-table" (click)="onActionButtonQuickViewRow(item)">
                                          @if (item?.title?.length > 0) {
                                            <tr>
                                              <td colspan="2">{{ item.title }}</td>
                                            </tr>
                                          }
                                          <tr>
                                            <td colspan="1">{{ "TITLE.AREA_UNIT" | translate }}:{{ item.area }}</td>
                                            <td colspan="1">{{ "TITLE.ROOM" | translate }}:{{ item.partition }}</td>
                                          </tr>
                                          @if (item?.createdDate?.length > 0) {
                                            <tr>
                                              <td colspan="2">
                                                {{ "TITLE.REGISTER" | translate }}:
                                                {{ item.createdDate | localeDateTime }}
                                              </td>
                                            </tr>
                                          }
                                          @if (item?.propertyTypeLanduse?.title?.length > 0) {
                                            <tr>
                                              <td colspan="2">
                                                {{ "TITLE.PROPERTY_TYPE" | translate }}:{{
                                                item.propertyTypeLanduse.title
                                                }}
                                              </td>
                                            </tr>
                                          }
                                        </table>
                                      </div>
                                    }
                                  </ng-template>
