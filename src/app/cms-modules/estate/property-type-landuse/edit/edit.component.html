<div class="card card-style loader-container">
  <app-progress-spinner [optionsInfoAreaId]="constructorInfoAreaId">
  </app-progress-spinner>
  <div class="content mb-0">
    <p class="mb-0 color-highlight font-600 font-12">
      {{ formInfo.formTitle }}
    </p>

    <p>
      {{ "TITLE.Be_Careful_When_Entering_Information" | translate }}
    </p>
    <!--content-->
    <app-cms-form-result-message
      [formInfo]="formInfo"
    ></app-cms-form-result-message>
    <form
      (ngSubmit)="onFormSubmit()"
      #vform="ngForm"
      [ngStyle]="{ direction: tokenInfo.access.direction }"
      >
      <!-- Title Field -->
      <div
        class="input-style has-borders no-icon input-style-always-active validate-field mb-4"
        >
        <label for="dataModel.title" class="color-highlight">{{
          fieldsInfo["title"]?.fieldTitle
        }}</label>
        <input
          type="text"
          [(ngModel)]="dataModel.title"
          name="dataModel.title"
          #Title
          placeholder="{{ fieldsInfo['title']?.fieldTitle }}"
          minlength="3"
          maxlength="100"
          required
          class="form-control validate-name"
          id="dataModel.title"
          />
          @if (!Title.value) {
            <i class="fa fa-times invalid color-red-dark"></i>
          }
          @if (Title.value) {
            <i class="fa fa-check valid color-green-dark"></i>
          }
          <em>{{ Title.value.length }} / 100</em>
          @if (Title.errors?.required) {
            <mat-error>
              {{ fieldsInfo["title"]?.fieldTitle }} is
              <strong>{{ "MESSAGE.required" | translate }}</strong>
            </mat-error>
          }
        </div>
        <!-- TitleML Field -->
        <div
          class="input-style has-borders no-icon input-style-always-active validate-field mb-4"
          >
          <label for="dataModel.titleML" class="color-highlight">TitleML</label>
          <input
            type="text"
            [(ngModel)]="dataModel.titleML"
            cmsKeyboardForce="en"
            name="dataModel.titleML"
            #TitleML
            placeholder="{{ fieldsInfo['titleML']?.fieldTitle }}"
            [disabled]="true"
            minlength="3"
            maxlength="100"
            required
            class="form-control validate-name"
            id="dataModel.titleML"
            />
          </div>
          <!-- TitleResourceLanguage Field -->
          @if (fieldsInfo['titleResourceLanguage']?.accessWatchField) {
            <div
              class="input-style has-borders no-icon input-style-always-active validate-field mb-4"
              >
              <label for="dataModel.titleResourceLanguage" class="color-highlight">{{
                fieldsInfo["titleResourceLanguage"]?.fieldTitle
              }}</label>
              <input
                matInput
                type="text"
                [(ngModel)]="dataModel.titleResourceLanguage"
                name="dataModel.titleResourceLanguage"
                #TitleResourceLanguage
                type="text"
                placeholder="{{ fieldsInfo['titleResourceLanguage']?.fieldTitle }}"
                [disabled]="!fieldsInfo['titleResourceLanguage']?.accessEditField"
                minlength="3"
                maxlength="100"
                required
                class="form-control validate-name"
                id="dataModel.titleResourceLanguage"
                />
                @if (!TitleResourceLanguage.value) {
                  <i
                    class="fa fa-times invalid color-red-dark"
                  ></i>
                }
                @if (TitleResourceLanguage.value) {
                  <i
                    class="fa fa-check valid color-green-dark"
                  ></i>
                }
                <em>{{ TitleResourceLanguage.value.length }} / 100</em>
                @if (TitleResourceLanguage.errors?.required) {
                  <mat-error>
                    TitleResourceLanguage is
                    <strong>{{ "MESSAGE.required" | translate }}</strong>
                  </mat-error>
                }
              </div>
            }
            <!-- createdYearActive Field -->
            @if (tokenHelper.isAdminSite || this.tokenHelper.isSupportSite) {
              <div
                class="d-flex mb-3"
                >
                <div class="pt-1">
                  <h5
                    data-trigger-switch="dataModel.createdYearActive"
                    class="font-600 font-14"
                    >
                    {{ fieldsInfo["createdYearActive"]?.fieldTitle }}
                  </h5>
                </div>
                <div class="ms-auto me-3 pe-2">
                  <div class="custom-control ios-switch small-switch">
                    <input
                      type="checkbox"
                      class="ios-input"
                      id="dataModel.createdYearActive"
                      [(ngModel)]="dataModel.createdYearActive"
                      name="dataModel.createdYearActive"
                      />
                      <label
                        class="custom-control-label"
                        for="dataModel.createdYearActive"
                      ></label>
                    </div>
                  </div>
                </div>
              }
              <!-- TitleCreatedYaer Field -->
              @if (dataModel.createdYearActive) {
                <div
                  class="input-style has-borders no-icon input-style-always-active validate-field mb-4"
                  >
                  <label for="dataModel.titleCreatedYaer" class="color-highlight">{{
                    fieldsInfo["titleCreatedYaer"]?.fieldTitle
                  }}</label>
                  <input
                    type="text"
                    [(ngModel)]="dataModel.titleCreatedYaer"
                    name="dataModel.titleCreatedYaer"
                    #TitleCreatedYaer
                    placeholder="{{ fieldsInfo['titleCreatedYaer']?.fieldTitle }}"
                    minlength="3"
                    maxlength="100"
                    required
                    class="form-control validate-name"
                    id="dataModel.titleCreatedYaer"
                    />
                    @if (!TitleCreatedYaer.value) {
                      <i
                        class="fa fa-times invalid color-red-dark"
                      ></i>
                    }
                    @if (TitleCreatedYaer.value) {
                      <i
                        class="fa fa-check valid color-green-dark"
                      ></i>
                    }
                    <em>{{ TitleCreatedYaer.value.length }} / 100</em>
                    @if (TitleCreatedYaer.errors?.required) {
                      <mat-error>
                        TitleCreatedYaer is
                        <strong>{{ "MESSAGE.required" | translate }}</strong>
                      </mat-error>
                    }
                  </div>
                }
                <!-- TitleCreatedYaerML Field -->
                @if (dataModel.createdYearActive) {
                  <div
                    class="input-style has-borders no-icon input-style-always-active validate-field mb-4"
                    >
                    <label for="dataModel.titleCreatedYaerML" class="color-highlight"
                      >TitleCreatedYaerML</label
                      >
                      <input
                        type="text"
                        [(ngModel)]="dataModel.titleCreatedYaerML"
                        name="dataModel.titleCreatedYaerML"
                        #TitleCreatedYaerML
                        placeholder="{{ fieldsInfo['titleCreatedYaerML']?.fieldTitle }}"
                        [disabled]="true"
                        class="form-control validate-name"
                        id="dataModel.titleCreatedYaerML"
                        />
                      </div>
                    }
                    <!-- TitleCreatedYaerResourceLanguage Field -->
                    @if (
                      fieldsInfo['titleCreatedYaerResourceLanguage']?.accessWatchField &&
                      dataModel.createdYearActive
                      ) {
                      <div
                        class="input-style has-borders no-icon input-style-always-active validate-field mb-4"
                        >
                        <label
                          for="dataModel.titleCreatedYaerResourceLanguage"
                          class="color-highlight"
                          >{{
                          fieldsInfo["titleCreatedYaerResourceLanguage"]?.fieldTitle
                          }}</label
                          >
                          <input
                            type="text"
                            [(ngModel)]="dataModel.titleCreatedYaerResourceLanguage"
                            name="dataModel.titleCreatedYaerResourceLanguage"
                            #TitleCreatedYaerResourceLanguage
          placeholder="{{
            fieldsInfo['titleCreatedYaerResourceLanguage']?.fieldTitle
          }}"
          [disabled]="
            !fieldsInfo['titleCreatedYaerResourceLanguage']?.accessEditField
          "
                            minlength="3"
                            maxlength="100"
                            required
                            class="form-control validate-name"
                            id="dataModel.titleCreatedYaerResourceLanguage"
                            />
                            @if (!TitleCreatedYaerResourceLanguage.value) {
                              <i
                                class="fa fa-times invalid color-red-dark"
                              ></i>
                            }
                            @if (TitleCreatedYaerResourceLanguage.value) {
                              <i
                                class="fa fa-check valid color-green-dark"
                              ></i>
                            }
                            <em>{{ TitleCreatedYaerResourceLanguage.value.length }} / 100</em>
                            @if (TitleCreatedYaerResourceLanguage.errors?.required) {
                              <mat-error>
                                TitleCreatedYaerResourceLanguage is
                                <strong>{{ "MESSAGE.required" | translate }}</strong>
                              </mat-error>
                            }
                          </div>
                        }
                        <!-- partitionActive Field -->
                        @if (tokenHelper.isAdminSite || this.tokenHelper.isSupportSite) {
                          <div
                            class="d-flex mb-3"
                            >
                            <div class="pt-1">
                              <h5
                                data-trigger-switch="dataModel.partitionActive"
                                class="font-600 font-14"
                                >
                                {{ fieldsInfo["partitionActive"]?.fieldTitle }}
                              </h5>
                            </div>
                            <div class="ms-auto me-3 pe-2">
                              <div class="custom-control ios-switch small-switch">
                                <input
                                  type="checkbox"
                                  class="ios-input"
                                  id="dataModel.partitionActive"
                                  [(ngModel)]="dataModel.partitionActive"
                                  name="dataModel.partitionActive"
                                  />
                                  <label
                                    class="custom-control-label"
                                    for="dataModel.partitionActive"
                                  ></label>
                                </div>
                              </div>
                            </div>
                          }
                          <!-- TitlePartition Field -->
                          @if (dataModel.partitionActive) {
                            <div
                              class="input-style has-borders no-icon input-style-always-active validate-field mb-4"
                              >
                              <label for="dataModel.titlePartition" class="color-highlight">{{
                                fieldsInfo["titlePartition"]?.fieldTitle
                              }}</label>
                              <input
                                type="text"
                                [(ngModel)]="dataModel.titlePartition"
                                name="dataModel.titlePartition"
                                #TitlePartition
                                placeholder="{{ fieldsInfo['titlePartition']?.fieldTitle }}"
                                minlength="3"
                                maxlength="100"
                                required
                                class="form-control validate-name"
                                id="dataModel.titlePartition"
                                />
                                @if (!TitlePartition.value) {
                                  <i
                                    class="fa fa-times invalid color-red-dark"
                                  ></i>
                                }
                                @if (TitlePartition.value) {
                                  <i
                                    class="fa fa-check valid color-green-dark"
                                  ></i>
                                }
                                <em>{{ TitlePartition.value.length }} / 100</em>
                                @if (TitlePartition.errors?.required) {
                                  <mat-error>
                                    TitlePartition is
                                    <strong>{{ "MESSAGE.required" | translate }}</strong>
                                  </mat-error>
                                }
                              </div>
                            }
                            <!-- TitlePartitionML Field -->
                            @if (dataModel.partitionActive) {
                              <div
                                class="input-style has-borders no-icon input-style-always-active validate-field mb-4"
                                >
                                <label for="dataModel.titlePartitionML" class="color-highlight"
                                  >TitlePartitionML</label
                                  >
                                  <input
                                    type="text"
                                    [(ngModel)]="dataModel.titlePartitionML"
                                    name="dataModel.titlePartitionML"
                                    [disabled]="true"
                                    class="form-control validate-name"
                                    id="dataModel.titlePartitionML"
                                    />
                                  </div>
                                }
                                <!-- TitlePartitionResourceLanguage Field -->
                                @if (
                                  fieldsInfo['titlePartitionResourceLanguage']?.accessWatchField &&
                                  dataModel.partitionActive
                                  ) {
                                  <div
                                    class="input-style has-borders no-icon input-style-always-active validate-field mb-4"
                                    >
                                    <label
                                      for="dataModel.titlePartitionResourceLanguage"
                                      class="color-highlight"
                                      >{{ fieldsInfo["titlePartitionResourceLanguage"]?.fieldTitle }}</label
                                      >
                                      <input
                                        type="text"
                                        [(ngModel)]="dataModel.titlePartitionResourceLanguage"
                                        name="dataModel.titlePartitionResourceLanguage"
                                        #TitlePartitionResourceLanguage
          placeholder="{{
            fieldsInfo['titlePartitionResourceLanguage']?.fieldTitle
          }}"
          [disabled]="
            !fieldsInfo['titlePartitionResourceLanguage']?.accessEditField
          "
                                        minlength="3"
                                        maxlength="100"
                                        required
                                        class="form-control validate-name"
                                        id="dataModel.titlePartitionResourceLanguage"
                                        />
                                        @if (!TitlePartitionResourceLanguage.value) {
                                          <i
                                            class="fa fa-times invalid color-red-dark"
                                          ></i>
                                        }
                                        @if (TitlePartitionResourceLanguage.value) {
                                          <i
                                            class="fa fa-check valid color-green-dark"
                                          ></i>
                                        }
                                        <em>{{ TitlePartitionResourceLanguage.value.length }} / 100</em>
                                        @if (TitlePartitionResourceLanguage.errors?.required) {
                                          <mat-error>
                                            TitlePartitionResourceLanguage is
                                            <strong>{{ "MESSAGE.required" | translate }}</strong>
                                          </mat-error>
                                        }
                                      </div>
                                    }
                                    <!-- Description Field -->
                                    <div
                                      class="input-style has-borders no-icon input-style-always-active validate-field mb-4"
                                      >
                                      <label for="dataModel.description" class="color-highlight">{{
                                        fieldsInfo["description"]?.fieldTitle
                                      }}</label>
                                      <textarea
                                        matInput
                                        [(ngModel)]="dataModel.description"
                                        name="dataModel.description"
                                        #Description
                                        type="text"
                                        placeholder="{{ fieldsInfo['description']?.fieldTitle }}"
                                        minlength="1"
                                        maxlength="500"
                                        rows="5"
                                        id="dataModel.description"
                                        class="form-control validate-name"
                                        >
                                      </textarea>
                                      <em>{{ Description.value.length }} / 500</em>
                                      @if (Description.errors?.required) {
                                        <mat-error>
                                          Description is <strong>{{ "MESSAGE.required" | translate }}</strong>
                                        </mat-error>
                                      }
                                    </div>
                                    <!-- IconFont Field -->
                                    @if (fieldsInfo['iconFont']?.accessWatchField) {
                                      <div
                                        class="input-style has-borders no-icon input-style-always-active validate-field mb-4"
                                        >
                                        <label for="dataModel.iconFont" class="color-highlight">{{
                                          fieldsInfo["iconFont"]?.fieldTitle
                                        }}</label>
                                        <input
                                          matInput
                                          type="text"
                                          [(ngModel)]="dataModel.iconFont"
                                          name="dataModel.iconFont"
                                          #IconFont
                                          type="text"
                                          [iconPicker]="dataModel.iconFont"
                                          [ipIconPack]="['fa']"
                                          [ipPosition]="'top'"
                                          (iconPickerSelect)="onIconPickerSelect($event)"
                                          placeholder="{{ fieldsInfo['iconFont']?.fieldTitle }}"
                                          [disabled]="!fieldsInfo['iconFont']?.accessAddField"
                                          class="form-control validate-name"
                                          id="dataModel.iconFont"
                                          />
                                          <span class="input-group-addon"
                                            ><i [ngClass]="dataModel.iconFont"></i
                                          ></span>
                                        </div>
                                      }
                                      <!-- iconColor Field -->
                                      @if (fieldsInfo['iconColor']?.accessWatchField) {
                                        <div
                                          class="input-style has-borders no-icon input-style-always-active validate-field mb-4 cms-input-group"
                                          >
                                          <label for="dataModel.iconColor" class="color-highlight">{{
                                            fieldsInfo["iconColor"]?.fieldTitle
                                          }}</label>
                                          <div class="row mb-0">
                                            <div class="col-11 pe-0">
                                              <input
                                                matInput
                                                type="text"
                                                [(ngModel)]="dataModel.iconColor"
                                                name="dataModel.iconColor"
                                                #iconColor
                                                type="text"
                                                [style.background]="dataModel.iconColor"
                                                [ngxMatColorPicker]="iconColorPicker"
                                                placeholder="{{ fieldsInfo['iconColor']?.fieldTitle }}"
                                                [disabled]="!fieldsInfo['iconColor']?.accessAddField"
                                                class="form-control validate-name"
                                                id="dataModel.iconColor"
                                                />
                                              </div>
                                              <div class="col-1 ps-0">
                                                <ngx-mat-color-toggle
                                                  matSuffix
                                                  [for]="iconColorPicker"
                                                ></ngx-mat-color-toggle>
                                                <ngx-mat-color-picker
                                                  #iconColorPicker
                                                  [touchUi]="true"
                                                  [color]="'primary'"
                                                ></ngx-mat-color-picker>
                                              </div>
                                            </div>
                                          </div>
                                        }
                                        <!-- LinkMainImageId Field -->
                                        <div class="mb-3">
                                          <a
                                            href="{{ dataModel.linkMainImageIdSrc | cmsthumbnail }}"
                                            target="_blank"
                                            >
                                            @if (dataModel?.linkMainImageIdSrc?.length > 0) {
                                              <img
                                                style="vertical-align: middle"
                                                class="ntk-hover-zoom"
                                                aria-hidden
                                                src="{{ dataModel.linkMainImageIdSrc | cmsthumbnail }}"
                                                height="50"
                                                width="50"
                                                />
                                            }
                                          </a>
                                        </div>
                                        <div
                                          class="input-style has-borders no-icon input-style-always-active validate-field mb-4"
                                          >
                                          <label
                                            (click)="fileManagerOpenForm = true"
                                            for="dataModel.linkMainImageId"
                                            class="color-highlight"
                                            >{{ "TITLE.PICTURE" | translate }}</label
                                            >
                                            <input
                                              matInput
                                              type="text"
                                              [(ngModel)]="dataModel.linkMainImageId"
                                              name="dataModel.linkMainImageId"
                                              #LinkMainImageId
                                              placeholder="{{ 'TITLE.Original_File_ID' | translate }}"
                                              autocomplete="off"
                                              (click)="fileManagerOpenForm = true"
                                              class="form-control validate-name"
                                              id="dataModel.linkMainImageId"
                                              />
                                              <cms-file-manager
                                                (itemSelected)="onActionFileSelected($event)"
                                                [language]="appLanguage"
                                                [isPopup]="true"
                                                [openDirectUploadView]="true"
                                                [(openForm)]="fileManagerOpenForm"
                                                [tree]="fileManagerTree"
                                                [openFilemanagerButtonLabelKey]="'select'"
                                                [selectFileType]="selectFileTypeMainImage"
                                                [openFilemanagerButtonView]="false"
                                                >
                                              </cms-file-manager>
                                            </div>
                                            <app-estate-property-type-usage-selectionlist
                                              [optionSelectForce]="dataEstatePropertyTypeUsageIds"
                                              [optionDisabled]="false"
                                              (optionChange)="onActionSelectorUserCategorySelect($event)"
                                              (optionSelectAdded)="onActionSelectorUserCategorySelectAdded($event)"
        (optionSelectRemoved)="
          onActionSelectorUserCategorySelectRemoved($event)
        "
                                              >
                                            </app-estate-property-type-usage-selectionlist>

                                            @if (formInfo.submitButtonEnabled) {
                                              <div class="form-actions">
                                                <button
                                                  type="button"
                                                  (click)="onFormCancel()"
                                                  class="btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-gray"
                                                  >
                                                  <i class="ft-x"></i> {{ "ACTION.CANCEL" | translate }}
                                                </button>
                                                <button
                                                  type="submit"
                                                  [disabled]="!vform.form.valid"
                                                  class="btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-green"
                                                  >
                                                  <i class="fa fa-check-square-o"></i>
                                                  {{ "ACTION.SAVE" | translate }}
                                                </button>
                                              </div>
                                            }
                                          </form>
                                          <!--content-->
                                        </div>
                                      </div>
