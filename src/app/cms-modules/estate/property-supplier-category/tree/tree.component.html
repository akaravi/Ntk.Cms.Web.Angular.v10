<app-cms-html-tree
  [optionHeaderDisplay]="true"
  [optionActionMainDisplay]="true"
  [optionFooterDisplay]="false"
  >
  <ng-container cms-tree-header>
    {{ "TABLE." + dataModelResult?.access?.moduleEntityName | translate }}
  </ng-container>
  <ng-container cms-tree-action>
    <!--begin:::::::::::::::::::::::::::::::::::::::::cms-header-->
    <!--end:::::::::::::::::::::::::::::::::::::::::cms-header-->

    <!--begin:::::::::::::::::::::::::::::::::::::::::cms-action-->
    @if (dataModelResult?.access?.accessAddRow) {
      <button
        type="button"
        (click)="onActionAdd()"
        class="btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-teal"
        >
        {{ "ACTION.ADD" | translate }}
      </button>
    }
    @if (dataModelResult?.access?.accessEditRow && dataModelSelect?.id > 0) {
      <button
        type="button"
        (click)="onActionEdit()"
        class="btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-magenta"
        >
        {{ "ACTION.EDIT" | translate }}
      </button>
    }
    @if (
      dataModelResult?.access?.accessDeleteRow &&
      dataModelSelect.id &&
      dataModelSelect?.id?.length > 0
      ) {
      <button
        type="button"
        (click)="onActionDelete()"
        class="btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-red"
        >
        {{ "ACTION.DELETE" | translate }}
      </button>
    }
    @if (dataModelResult?.access?.accessWatchRow) {
      <button
        type="button"
        (click)="onActionButtonReload()"
        class="btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-highlight"
        >
        <mat-icon title="{{ 'ACTION.RELOAD' | translate }}">refresh</mat-icon>
      </button>
    }
    <!--end:::::::::::::::::::::::::::::::::::::::::cms-action-->
  </ng-container>
  <ng-container cms-tree-body class="loader-container">
    <app-progress-spinner [optionsInfoAreaId]="constructorInfoAreaId">
    </app-progress-spinner>
    <!--begin:::::::::::::::::::::::::::::::::::::::::cms-body-->

    <mat-tree
      #treeTagControl
      [dataSource]="dataSource"
      [childrenAccessor]="childrenAccessor"
      >
      <mat-tree-node
        *matTreeNodeDef="let node"
        matTreeNodePadding
        [class.ntk-tree-selected]="
          dataModelSelect.id?.length > 0 && dataModelSelect.id === node.id
        "
        >
        <button matIconButton disabled></button>
        <span (click)="onActionSelect(node)">
          <img
            style="vertical-align: middle"
            class="ntk-hover-zoom"
            aria-hidden
            src="{{ node.linkMainImageIdSrc }}"
            height="40"
            width="40"
            /><i
            [ngClass]="node.IconFont"
            [style.color]="node.IconColor"
            aria-hidden="true"
            ></i
            >&nbsp;{{ node.title }}</span
            >
          </mat-tree-node>
          <mat-tree-node
            *matTreeNodeDef="let node; when: hasChild"
            matTreeNodePadding
            matTreeNodeToggle
            [cdkTreeNodeTypeaheadLabel]="node.title"
            isExpandable
            [isExpanded]="node.isExpanded ?? false"
        [class.ntk-tree-selected]="
          dataModelSelect.id?.length > 0 && dataModelSelect.id === node.id
        "
            >
            <button
              matIconButton
              matTreeNodeToggle
              [attr.type]="'button'"
              [attr.aria-label]="'Toggle ' + node.title"
              >
              <mat-icon class="mat-icon-rtl-mirror">
                {{
                treeTagControl.isExpanded(node) ? "expand_more" : "chevron_right"
                }}
              </mat-icon>
            </button>
            <span (click)="onActionSelect(node)">
              <img
                style="vertical-align: middle"
                class="ntk-hover-zoom"
                aria-hidden
                src="{{ node.linkMainImageIdSrc }}"
                height="40"
                width="40"
                /><i
                [ngClass]="node.IconFont"
                [style.color]="node.IconColor"
                aria-hidden="true"
                ></i
                >&nbsp;{{ node.title }}</span
                >
              </mat-tree-node>
            </mat-tree>
            <!--end:::::::::::::::::::::::::::::::::::::::::cms-body-->
          </ng-container>
          <ng-container cms-tree-footer>
            <!--begin:::::::::::::::::::::::::::::::::::::::::cms-tree-footer-->
            <!--end:::::::::::::::::::::::::::::::::::::::::cms-tree-footer-->
          </ng-container>
        </app-cms-html-tree>
