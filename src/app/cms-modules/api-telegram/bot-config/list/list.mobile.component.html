<app-cms-html-list-mobile
  [optionsListInfoAreaId]="constructorInfoAreaId"
  [optionGuideNoticeKey]="''"
  [(optionActionGuideNoticeDisplay)]="viewGuideNotice"
  (optionOnActionButtonMemoRow)="onActionButtonMemoRow()"
  (optionOnActionButtonMemo)="onActionButtonMemo()"
  (optionOnActionButtonExport)="onActionButtonExport()"
  (optionOnActionButtonPrintRow)="onActionButtonPrintRow()"
  [optionTreeDisplay]="false"
  [optionActionRowId]="tableRowSelected?.id"
  [optionActionRowDisplay]="tableRowSelected?.id > 0"
  [optionActionRowDisplayMenu]="tableRowSelect2Click"
  [optionActionRowDisplayMenuAct]="tableRowSelectActionMenuClick"
  [optionSelectRowItemTitle]="
    ($any(tableRowSelected)?.title)?.length > 0
      ? ($any(tableRowSelected)?.title)
      : tableRowSelected?.id
  "
>
  <ng-container cms-tree>
    <!--begin:::::::::::::::::::::::::::::::::::::::::cms-tree-->
    --------------------------------------
    <!--end:::::::::::::::::::::::::::::::::::::::::cms-tree-->
  </ng-container>

  <ng-container cms-header>
    <!--begin:::::::::::::::::::::::::::::::::::::::::cms-header-->
    <!--end:::::::::::::::::::::::::::::::::::::::::cms-header-->
  </ng-container>

  <ng-container cms-action-header>
    <!--begin:::::::::::::::::::::::::::::::::::::::::cms-action-header-->
    <!--end:::::::::::::::::::::::::::::::::::::::::cms-action-header-->
  </ng-container>

  <ng-container cms-action-header-start>
    <!--begin:::::::::::::::::::::::::::::::::::::::::cms-action-header-start-->
    <a
      type="button"
      class="btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-highlight"
      (click)="viewGuideNotice = !viewGuideNotice"
      target="_blank"
    >
      <i class="fa-solid fa-info font-18" style="color: #ffffff"></i>
    </a>
    <a
      type="button"
      class="btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-highlight"
      (click)="onActionButtonReload()"
      target="_blank"
    >
      <i
        class="fa-solid fa-rotate-right font-18"
        style="color: #ffffff"
        [class.rotation360]="
          publicHelper.processService.process.inRunArea[constructorInfoAreaId]
        "
      ></i>
    </a>
    <a
      (click)="onActionGridExpandRows(true)"
      target="_blank"
      class="btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-highlight"
    >
      <i class="fa-solid fa-maximize font-18" style="color: #ffffff"></i>
    </a>
    <a
      (click)="onActionGridExpandRows(false)"
      target="_blank"
      class="btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-highlight"
    >
      <i class="fa-solid fa-minimize font-18" style="color: #ffffff"></i>
    </a>
    <!--end:::::::::::::::::::::::::::::::::::::::::cms-action-header-start-->
  </ng-container>

  <ng-container cms-action-header-end>
    <!--begin:::::::::::::::::::::::::::::::::::::::::cms-action-header-end-->
    <a
      (click)="optionsSearch.data.show = !optionsSearch.data.show"
      class="btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-highlight"
    >
      <mat-slide-toggle [checked]="optionsSearch.data.show"></mat-slide-toggle>
      {{ "ACTION.SEARCH" | translate }}
    </a>
    <a
      (click)="onActionButtonStatist()"
      class="btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-highlight"
    >
      <mat-slide-toggle [checked]="optionsStatist.data.show">
      </mat-slide-toggle>
      {{ "ACTION.STATIST" | translate }}
    </a>
    <!--end:::::::::::::::::::::::::::::::::::::::::cms-action-header-end-->
  </ng-container>

  <ng-container cms-action-main>
    <!--begin:::::::::::::::::::::::::::::::::::::::::cms-action-->
    @if (dataModelResult?.access?.accessAddRow) {
      <div class="col-4">
        <a
          type="button"
          class="btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-teal"
          (click)="onActionButtonNewRow()"
          target="_blank"
        >
          <i class="fa-solid fa-plus font-18" style="color: #ffffff"></i>
          <br />
        </a>
        <p class="font-11 text-center opacity-70">
          {{ "ACTION.ADD" | translate }}
        </p>
      </div>
    }

    @if (tableRowSelected?.id > 0) {
      <div class="col-4">
        <a
          type="button"
          class="btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-highlight"
          (click)="onActionButtonSendMessage()"
          target="_blank"
        >
          <i class="fa-solid fa-message font-18" style="color: #ffffff"></i>
          <br />
        </a>
        <p class="font-11 text-center opacity-70">
          {{ "ACTION.Send_Message" | translate }}
        </p>
      </div>
    }
    @if (tableRowSelected?.id > 0) {
      <div class="col-4">
        <a
          type="button"
          class="btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-highlight"
          (click)="onActionButtonGetMeAsync()"
          target="_blank"
        >
          <i
            class="fa-solid fa-cloud-arrow-down font-18"
            style="color: #ffffff"
          ></i>
          <br />
        </a>
        <p class="font-11 text-center opacity-70">
          {{ "ACTION.GetMeAsync" | translate }}
        </p>
      </div>
    }
    <div class="col-4">
      <a
        type="button"
        class="btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-highlight"
        (click)="onActionButtonSetAllWebhookUpdate()"
        target="_blank"
      >
        <i class="fa-solid fa-webhook font-18" style="color: #ffffff"></i>
        <br />
      </a>
      <p class="font-11 text-center opacity-70">
        {{ "ACTION.SetAllWebhookUpdate" | translate }}
      </p>
    </div>
    <!--end:::::::::::::::::::::::::::::::::::::::::cms-action-->
  </ng-container>

  <ng-container cms-action-row>
    <!--begin:::::::::::::::::::::::::::::::::::::::::cms-action-row-->
    @if (dataModelResult?.access?.accessEditRow && tableRowSelected?.id > 0) {
      <div class="col-4">
        <a
          (click)="onActionButtonEditRow(tableRowSelected)"
          class="btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-magenta"
          target="_blank"
        >
          <i class="fa-solid fa-pen font-18" style="color: #ffffff"></i><br />
        </a>
        <p class="font-11 text-center opacity-70">
          {{ "ACTION.EDIT" | translate }}
        </p>
      </div>
    }
    @if (dataModelResult?.access?.accessDeleteRow && tableRowSelected?.id > 0) {
      <div class="col-4">
        <a
          (click)="onActionButtonDeleteRow(tableRowSelected)"
          class="btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-red"
          target="_blank"
        >
          <i class="fa-solid fa-trash font-18" style="color: #ffffff"></i><br />
        </a>
        <p class="font-11 text-center opacity-70">
          {{ "ACTION.DELETE" | translate }}
        </p>
      </div>
    }
    <div class="col-4">
      <a
        (click)="onActionButtonGetMeAsync(tableRowSelected)"
        class="btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-highlight"
        target="_blank"
      >
        <i class="fa-solid fa-check font-18" style="color: #ffffff"></i><br />
      </a>
      <p class="font-11 text-center opacity-70">
        {{ "ACTION.CHECK_SITUATION" | translate }}
      </p>
    </div>
    <div class="col-4">
      <a
        (click)="onActionButtonInboxList(tableRowSelected)"
        class="btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-highlight"
        target="_blank"
      >
        <i class="fa-solid fa-receipt font-18" style="color: #ffffff"></i><br />
      </a>
      <p class="font-11 text-center opacity-70">
        {{ "ACTION.LIST_OF_RECEIPTS" | translate }}
      </p>
    </div>
    <div class="col-4">
      <a
        (click)="onActionButtonOutboxList(tableRowSelected)"
        class="btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-highlight"
        target="_blank"
      >
        <i class="fa-solid fa-list font-18" style="color: #ffffff"></i><br />
      </a>
      <p class="font-11 text-center opacity-70">
        {{ "ACTION.LIST_OF_SUBMISSIONS" | translate }}
      </p>
    </div>
    <div class="col-4">
      <a
        (click)="onActionButtonSendMessage(tableRowSelected)"
        class="btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-highlight"
        target="_blank"
      >
        <i class="fa-solid fa-message font-18" style="color: #ffffff"></i><br />
      </a>
      <p class="font-11 text-center opacity-70">
        {{ "ACTION.Send_Message" | translate }}
      </p>
    </div>
    <div class="col-4">
      <a
        (click)="onActionButtonReceiveMessageAll(tableRowSelected)"
        class="btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-highlight"
        target="_blank"
      >
        <i class="fa-solid fa-inbox-in font-18" style="color: #ffffff"></i><br />
      </a>
      <p class="font-11 text-center opacity-70">
        {{ "ACTION.RECEIVE_MESSAGES" | translate }}
      </p>
    </div>
    <div class="col-4">
      <a
        (click)="onActionButtonReceiveMessageLast(tableRowSelected)"
        class="btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-highlight"
        target="_blank"
      >
        <i class="fa-solid fa-message font-18" style="color: #ffffff"></i><br />
      </a>
      <p class="font-11 text-center opacity-70">
        {{ "ACTION.GET_LATEST_MESSAGE" | translate }}
      </p>
    </div>
    <div class="col-4">
      <a
        type="button"
        class="btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-highlight"
        (click)="onActionButtonLinkTo(tableRowSelected)"
        target="_blank"
      >
        <i class="fa-solid fa-share font-18" style="color: #ffffff"></i><br />
      </a>
      <p class="font-11 text-center opacity-70">
        {{ "TITLE.LINKTO" | translate }}
      </p>
    </div>
    <!--end:::::::::::::::::::::::::::::::::::::::::cms-action-row-->
  </ng-container>

  <ng-container cms-action-area>
    <!--begin:::::::::::::::::::::::::::::::::::::::::cms-action-area-->
    <app-cms-search-list [(options)]="optionsSearch"></app-cms-search-list>
    <app-cms-statist-list [(options)]="optionsStatist"></app-cms-statist-list>
    <!--end:::::::::::::::::::::::::::::::::::::::::cms-action-area-->
  </ng-container>

  <ng-container cms-body>
    <!--begin:::::::::::::::::::::::::::::::::::::::::cms-body-->
    @if (dataModelResult?.listItems?.length) {
      <div class="cms-m-list">
        @for (row of dataModelResult.listItems; track row.id) {
          <div
            class="cms-m-list-item"
            [class.selected]="row.id === tableRowSelected?.id"
            (click)="onActionTableRowSelect(row, $event)"
            (rtclick)="onActionTableRowSelect(row, $event)"
            (mouseenter)="onActionTableRowMouseEnter(row)"
            (mouseleave)="onActionTableRowMouseLeave(row)"
            role="button"
            [attr.aria-label]="($any(row).title) || ($any(row).username) || row.id"
            tabindex="0"
          >
            <div class="cms-m-list-item-image-placeholder">
              <i class="fa-brands fa-telegram" aria-hidden="true"></i>
            </div>
            <div class="cms-m-list-item-content">
              <div class="cms-m-list-item-title">
                {{ ($any(row).title) || ($any(row).username) || ('ID: ' + row.id) }}
              </div>
              @if (($any(row).username)) {
                <div class="cms-m-list-item-subtitle">
                  <i class="fa-solid fa-user" aria-hidden="true"></i>
                  {{ fieldsInfo["username"]?.fieldTitle }}: {{ ($any(row).username) }}
                </div>
              }
              @if (($any(row).statusWebhook) !== undefined) {
                <div class="cms-m-list-item-subtitle">
                  <i class="fa-solid fa-plug" aria-hidden="true"></i>
                  {{ fieldsInfo["statusWebhook"]?.fieldTitle }}:
                  <i [ngClass]="($any(row).statusWebhook) | boolclass"></i>
                </div>
              }
              @if (row.createdDate) {
                <div class="cms-m-list-item-subtitle">
                  <i class="fa-solid fa-calendar-plus" aria-hidden="true"></i>
                  {{
                    fieldsInfo["createdDate"]?.fieldTitle
                  }}: {{ row.createdDate | localeDate }}
                </div>
              }
              @if (row.updatedDate) {
                <div class="cms-m-list-item-subtitle">
                  <i class="fa-solid fa-calendar-check" aria-hidden="true"></i>
                  {{
                    fieldsInfo["updatedDate"]?.fieldTitle
                  }}: {{ row.updatedDate | localeDate }}
                </div>
              }
              @if (row.recordStatus !== undefined) {
                <div class="cms-m-list-item-subtitle">
                  <i [ngClass]="row.recordStatus | statusIconClass"></i>
                  @if (
                    dataModelResult?.access?.accessEditRow &&
                    row.id === tableRowSelected?.id
                  ) {
                    <select
                      matNativeControl
                      cmsRecordStatusSelfSave
                      [contentService]="contentService"
                      [row]="row"
                      style="background: none; border: none; margin-left: 8px"
                    ></select>
                  }
                </div>
              }
              @if (getRowExpanded(row)) {
                <div class="cms-m-list-item-expanded">
                  <div class="cms-m-list-item-subtitle">
                    ID: {{ row.id }}
                  </div>
                </div>
              }
            </div>
          </div>
        }
      </div>
    } @else {
      <div class="cms-m-empty">
        {{ "MESSAGE.NoRecord" | translate }}
      </div>
    }
    <!--end:::::::::::::::::::::::::::::::::::::::::cms-body-->
  </ng-container>

  <ng-container cms-footer>
    <!--begin:::::::::::::::::::::::::::::::::::::::::cms-footer-->
    <mat-paginator
      #paginator
      [length]="dataModelResult.totalRowCount"
      [pageIndex]="dataModelResult.currentPageNumber - 1"
      [pageSize]="dataModelResult.rowPerPage"
      [pageSizeOptions]="[5, 10, 20, 100]"
      (page)="onTablePageingData($event)"
    ></mat-paginator>
    <!--end:::::::::::::::::::::::::::::::::::::::::cms-footer-->
  </ng-container>
</app-cms-html-list-mobile>
