<app-cms-html-tree
  [optionListTitle]="('TABLE.' + dataModelResult?.access?.moduleEntityName) | translate"
  [optionHeaderDisplay]="true"
  [optionActionMainDisplay]="true"
  [optionFooterDisplay]="false"
  >
  <ng-container cms-tree-action>
    <!--begin:::::::::::::::::::::::::::::::::::::::::cms-header-->
    <!--end:::::::::::::::::::::::::::::::::::::::::cms-header-->

    <!--begin:::::::::::::::::::::::::::::::::::::::::cms-action-->
    @if (dataModelResult?.access?.accessAddRow) {
      <button
        type="button"
        (click)="onActionAdd()"
        class="btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-teal"
        >
        {{ "ACTION.ADD" | translate }}
      </button>
    }
    @if (dataModelResult?.access?.accessEditRow && dataModelSelect?.id > 0) {
      <button
        type="button"
        (click)="onActionEdit()"
        class="btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-magenta"
        >
        {{ "ACTION.EDIT" | translate }}
      </button>
    }
    @if (dataModelResult?.access?.accessWatchRow) {
      <button
        type="button"
        (click)="onActionButtonReload()"
        class="btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-highlight"
        >
        <mat-icon
          style="font-size: 20px; margin: -6px"
          title="{{ 'ACTION.RELOAD' | translate }}"
        [class.rotation360]="
          publicHelper.processService.process.inRunArea[constructorInfoAreaId]
        "
          >refresh</mat-icon
          >
        </button>
      }
      <!--end:::::::::::::::::::::::::::::::::::::::::cms-action-->
    </ng-container>
    <ng-container cms-tree-body class="loader-container">
      <app-progress-spinner [optionsInfoAreaId]="constructorInfoAreaId">
      </app-progress-spinner>
      <!--begin:::::::::::::::::::::::::::::::::::::::::cms-body-->

      <mat-tree
        #treeTagControl
        [dataSource]="dataSource"
        [childrenAccessor]="childrenAccessor"
        >
        <mat-tree-node
          *matTreeNodeDef="let node"
          matTreeNodePadding
        [class.ntk-tree-selected]="
          dataModelSelect?.id > 0 && dataModelSelect?.id === node.id
        "
          >
          <button matIconButton disabled></button>
          <span (click)="onActionSelect(node)">{{ node.titleML }}</span>
        </mat-tree-node>
        <mat-tree-node
          *matTreeNodeDef="let node; when: hasChild"
          matTreeNodePadding
          matTreeNodeToggle
          [cdkTreeNodeTypeaheadLabel]="node.titleML"
          isExpandable
          [isExpanded]="node.isExpanded ?? false"
        [class.ntk-tree-selected]="
          dataModelSelect?.id > 0 && dataModelSelect?.id === node.id
        "
          >
          <button
            matIconButton
            matTreeNodeToggle
            [attr.type]="'button'"
            [attr.aria-label]="'Toggle ' + node.titleML"
            >
            <mat-icon class="mat-icon-rtl-mirror">
              {{
              treeTagControl.isExpanded(node) ? "expand_more" : "chevron_right"
              }}
            </mat-icon>
          </button>
          <span (click)="onActionSelect(node)">{{ node.titleML }}</span>
        </mat-tree-node>
      </mat-tree>

      <!--end:::::::::::::::::::::::::::::::::::::::::cms-body-->
    </ng-container>
    <ng-container cms-tree-footer>
      <!--begin:::::::::::::::::::::::::::::::::::::::::cms-tree-footer-->
      <!--end:::::::::::::::::::::::::::::::::::::::::cms-tree-footer-->
    </ng-container>
  </app-cms-html-tree>
