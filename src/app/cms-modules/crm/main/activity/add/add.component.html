<div class="card card-style loader-container">
  <app-progress-spinner [optionsInfoAreaId]="constructorInfoAreaId">
  </app-progress-spinner>
  <div class="content mb-0">
    <p class="mb-0 color-highlight font-600 font-12">
      {{ formInfo.formTitle }}
    </p>

    <p>
      {{ "TITLE.Be_Careful_When_Entering_Information" | translate }}
    </p>
    <!--Content-->

    <app-cms-form-result-message
      [formInfo]="formInfo"
    ></app-cms-form-result-message>
    <form
      (ngSubmit)="onFormSubmit()"
      #vform="ngForm"
      [ngStyle]="{ direction: tokenInfo.access.direction }"
      >
      <!-- ActivityType Enum Selector -->
      @if (fieldsInfo['activityType']?.accessWatchField) {
        <app-cms-enum-x-selector
          [optionDataListResult]="dataModelCrmActivityTypeEnumResult"
          [(model)]="dataModel.activityType"
          [optionDisabled]="!fieldsInfo['activityType']?.accessAddField"
          [optionLabel]="fieldsInfo['activityType']?.fieldTitle"
          [optionRequired]="false"
          [optionSelectFirstItem]="false"
        ></app-cms-enum-x-selector>
      }
        <!-- Subject Field -->
        <div
          class="input-style has-borders no-icon input-style-always-active validate-field mb-4"
          >
          <label for="dataModel.subject" class="color-highlight">{{
            fieldsInfo["subject"]?.fieldTitle
          }}</label>
          <input
            matInput
            type="text"
            [(ngModel)]="dataModel.subject"
            name="dataModel.subject"
            #Subject
            placeholder="{{ fieldsInfo['subject']?.fieldTitle }}"
            maxlength="256"
            [disabled]="!fieldsInfo['subject']?.accessAddField"
            class="form-control validate-name"
            id="dataModel.subject"
            />
          </div>
          <!-- StartDate Field -->
          <div
            class="input-style has-borders no-icon input-style-always-active validate-field mb-4"
            >
            <label for="dataModel.startDate" class="color-highlight">{{
              fieldsInfo["startDate"]?.fieldTitle
            }}</label>
            <input
              matInput
              type="datetime-local"
              [(ngModel)]="dataModel.startDate"
              name="dataModel.startDate"
              #StartDate
              placeholder="{{ fieldsInfo['startDate']?.fieldTitle }}"
              [disabled]="!fieldsInfo['startDate']?.accessAddField"
              class="form-control validate-name"
              id="dataModel.startDate"
              />
            </div>
            <!-- EndDate Field -->
            <div
              class="input-style has-borders no-icon input-style-always-active validate-field mb-4"
              >
              <label for="dataModel.endDate" class="color-highlight">{{
                fieldsInfo["endDate"]?.fieldTitle
              }}</label>
              <input
                matInput
                type="datetime-local"
                [(ngModel)]="dataModel.endDate"
                name="dataModel.endDate"
                #EndDate
                placeholder="{{ fieldsInfo['endDate']?.fieldTitle }}"
                [disabled]="!fieldsInfo['endDate']?.accessAddField"
                class="form-control validate-name"
                id="dataModel.endDate"
                />
              </div>
              <!-- Status Enum Selector -->
              @if (fieldsInfo['status']?.accessWatchField) {
                <app-cms-enum-x-selector
                  [optionDataListResult]="dataModelCrmActivityStatusEnumResult"
                  [(model)]="dataModel.status"
                  [optionDisabled]="!fieldsInfo['status']?.accessAddField"
                  [optionLabel]="fieldsInfo['status']?.fieldTitle"
                  [optionRequired]="false"
                  [optionSelectFirstItem]="true"
                ></app-cms-enum-x-selector>
              }
              <!-- Priority Enum Selector -->
              @if (fieldsInfo['priority']?.accessWatchField) {
                <app-cms-enum-x-selector
                  [optionDataListResult]="dataModelCrmActivityPriorityEnumResult"
                  [(model)]="dataModel.priority"
                  [optionDisabled]="!fieldsInfo['priority']?.accessAddField"
                  [optionLabel]="fieldsInfo['priority']?.fieldTitle"
                  [optionRequired]="false"
                  [optionSelectFirstItem]="true"
                ></app-cms-enum-x-selector>
              }
                  <!-- Description Field -->
                  <div
                    class="input-style has-borders no-icon input-style-always-active validate-field mb-4"
                    >
                    <label for="dataModel.description" class="color-highlight">{{
                      fieldsInfo["description"]?.fieldTitle
                    }}</label>
                    <textarea
                      matInput
                      [(ngModel)]="dataModel.description"
                      name="dataModel.description"
                      #Description
                      placeholder="{{ fieldsInfo['description']?.fieldTitle }}"
                      rows="4"
                      [disabled]="!fieldsInfo['description']?.accessAddField"
                      class="form-control validate-name"
                      id="dataModel.description"
                      ></textarea>
                    </div>
                    <!-- Account Selector -->
                    <app-crm-account-selector
                      (optionChange)="onActionSelectorAccount($event)"
                      [optionSelectForce]="dataModel.linkAccountId"
                      [optionPlaceholder]="fieldsInfo['linkAccountId']?.fieldTitle || 'Account'"
                      [optionDisabled]="!fieldsInfo['linkAccountId']?.accessAddField"
                      ></app-crm-account-selector>
                    <!-- Contact Selector -->
                    <app-crm-contact-selector
                      (optionChange)="onActionSelectorContact($event)"
                      [optionSelectForce]="dataModel.linkContactId"
                      [optionPlaceholder]="fieldsInfo['linkContactId']?.fieldTitle || 'Contact'"
                      [optionDisabled]="!fieldsInfo['linkContactId']?.accessAddField"
                      ></app-crm-contact-selector>
                    <!-- Lead Selector -->
                    <app-crm-lead-selector
                      (optionChange)="onActionSelectorLead($event)"
                      [optionSelectForce]="dataModel.linkLeadId"
                      [optionPlaceholder]="fieldsInfo['linkLeadId']?.fieldTitle || 'Lead'"
                      [optionDisabled]="!fieldsInfo['linkLeadId']?.accessAddField"
                      ></app-crm-lead-selector>
                    <!-- Opportunity Selector -->
                    <app-crm-opportunity-selector
                      (optionChange)="onActionSelectorOpportunity($event)"
                      [optionSelectForce]="dataModel.linkOpportunityId"
                      [optionPlaceholder]="fieldsInfo['linkOpportunityId']?.fieldTitle || 'Opportunity'"
                      [optionDisabled]="!fieldsInfo['linkOpportunityId']?.accessAddField"
                      ></app-crm-opportunity-selector>
                    <!-- Deal Selector -->
                    <app-crm-deal-selector
                      (optionChange)="onActionSelectorDeal($event)"
                      [optionSelectForce]="dataModel.linkDealId"
                      [optionPlaceholder]="fieldsInfo['linkDealId']?.fieldTitle || 'Deal'"
                      [optionDisabled]="!fieldsInfo['linkDealId']?.accessAddField"
                      ></app-crm-deal-selector>
                    <!-- Campaign Selector -->
                    <app-crm-campaign-selector
                      (optionChange)="onActionSelectorCampaign($event)"
                      [optionSelectForce]="dataModel.linkCampaignId"
                      [optionPlaceholder]="fieldsInfo['linkCampaignId']?.fieldTitle || 'Campaign'"
                      [optionDisabled]="!fieldsInfo['linkCampaignId']?.accessAddField"
                      ></app-crm-campaign-selector>
                    <!-- Location Field -->
                    <div
                      class="input-style has-borders no-icon input-style-always-active validate-field mb-4"
                      >
                      <label for="dataModel.location" class="color-highlight">{{
                        fieldsInfo["location"]?.fieldTitle || "TITLE.Location"
                      }}</label>
                      <input
                        matInput
                        type="text"
                        [(ngModel)]="dataModel.location"
                        name="dataModel.location"
                        #Location
                        placeholder="{{ 'TITLE.Location' | translate }}"
                        maxlength="512"
                        [disabled]="!fieldsInfo['location']?.accessAddField"
                        class="form-control validate-name"
                        id="dataModel.location"
                        />
                      </div>
                      <!-- SeModule Field -->
                      <div
                        class="input-style has-borders no-icon input-style-always-active validate-field mb-4"
                        >
                        <label for="dataModel.seModule" class="color-highlight">{{
                          fieldsInfo["seModule"]?.fieldTitle || "TITLE.SE_Module"
                        }}</label>
                        <input
                          matInput
                          type="text"
                          [(ngModel)]="dataModel.seModule"
                          name="dataModel.seModule"
                          #SeModule
                          placeholder="{{ 'TITLE.SE_Module' | translate }}"
                          maxlength="20"
                          [disabled]="!fieldsInfo['seModule']?.accessAddField"
                          class="form-control validate-name"
                          id="dataModel.seModule"
                          />
                        </div>
                        <!-- TimeStart Field -->
                        <div
                          class="input-style has-borders no-icon input-style-always-active validate-field mb-4"
                          >
                          <label for="dataModel.timeStart" class="color-highlight">{{
                            fieldsInfo["timeStart"]?.fieldTitle || "TITLE.Time_Start"
                          }}</label>
                          <input
                            matInput
                            type="time"
                            [(ngModel)]="dataModel.timeStart"
                            name="dataModel.timeStart"
                            #TimeStart
                            placeholder="{{ 'TITLE.Time_Start' | translate }}"
                            [disabled]="!fieldsInfo['timeStart']?.accessAddField"
                            class="form-control validate-name"
                            id="dataModel.timeStart"
                            />
                          </div>
                          <!-- TimeEnd Field -->
                          <div
                            class="input-style has-borders no-icon input-style-always-active validate-field mb-4"
                            >
                            <label for="dataModel.timeEnd" class="color-highlight">{{
                              fieldsInfo["timeEnd"]?.fieldTitle || "TITLE.Time_End"
                            }}</label>
                            <input
                              matInput
                              type="time"
                              [(ngModel)]="dataModel.timeEnd"
                              name="dataModel.timeEnd"
                              #TimeEnd
                              placeholder="{{ 'TITLE.Time_End' | translate }}"
                              [disabled]="!fieldsInfo['timeEnd']?.accessAddField"
                              class="form-control validate-name"
                              id="dataModel.timeEnd"
                              />
                            </div>
                            <!-- DurationHours Field -->
                            <div
                              class="input-style has-borders no-icon input-style-always-active validate-field mb-4"
                              >
                              <label for="dataModel.durationHours" class="color-highlight">{{
                                fieldsInfo["durationHours"]?.fieldTitle || "TITLE.Duration_Hours"
                              }}</label>
                              <input
                                matInput
                                type="text"
                                [(ngModel)]="dataModel.durationHours"
                                name="dataModel.durationHours"
                                #DurationHours
                                placeholder="{{ 'TITLE.Duration_Hours' | translate }}"
                                maxlength="200"
                                [disabled]="!fieldsInfo['durationHours']?.accessAddField"
                                class="form-control validate-name"
                                id="dataModel.durationHours"
                                />
                              </div>
                              <!-- DurationMinutes Field -->
                              <div
                                class="input-style has-borders no-icon input-style-always-active validate-field mb-4"
                                >
                                <label for="dataModel.durationMinutes" class="color-highlight">{{
                                  fieldsInfo["durationMinutes"]?.fieldTitle || "TITLE.Duration_Minutes"
                                }}</label>
                                <input
                                  matInput
                                  type="text"
                                  [(ngModel)]="dataModel.durationMinutes"
                                  name="dataModel.durationMinutes"
                                  #DurationMinutes
                                  placeholder="{{ 'TITLE.Duration_Minutes' | translate }}"
                                  maxlength="200"
                                  [disabled]="!fieldsInfo['durationMinutes']?.accessAddField"
                                  class="form-control validate-name"
                                  id="dataModel.durationMinutes"
                                  />
                                </div>
                                <!-- EventStatus Field -->
                                <div
                                  class="input-style has-borders no-icon input-style-always-active validate-field mb-4"
                                  >
                                  <label for="dataModel.eventStatus" class="color-highlight">{{
                                    fieldsInfo["eventStatus"]?.fieldTitle || "TITLE.Event_Status"
                                  }}</label>
                                  <input
                                    matInput
                                    type="text"
                                    [(ngModel)]="dataModel.eventStatus"
                                    name="dataModel.eventStatus"
                                    #EventStatus
                                    placeholder="{{ 'TITLE.Event_Status' | translate }}"
                                    maxlength="200"
                                    [disabled]="!fieldsInfo['eventStatus']?.accessAddField"
                                    class="form-control validate-name"
                                    id="dataModel.eventStatus"
                                    />
                                  </div>
                                  <!-- Recurrence Field -->
                                  <div
                                    class="input-style has-borders no-icon input-style-always-active validate-field mb-4"
                                    >
                                    <label for="dataModel.recurrence" class="color-highlight">{{
                                      fieldsInfo["recurrence"]?.fieldTitle || "TITLE.Recurrence"
                                    }}</label>
                                    <input
                                      matInput
                                      type="text"
                                      [(ngModel)]="dataModel.recurrence"
                                      name="dataModel.recurrence"
                                      #Recurrence
                                      placeholder="{{ 'TITLE.Recurrence' | translate }}"
                                      maxlength="32"
                                      [disabled]="!fieldsInfo['recurrence']?.accessAddField"
                                      class="form-control validate-name"
                                      id="dataModel.recurrence"
                                      />
                                    </div>
                                    <!-- RecurrenceId Field -->
                                    <div
                                      class="input-style has-borders no-icon input-style-always-active validate-field mb-4"
                                      >
                                      <label for="dataModel.recurrenceId" class="color-highlight">{{
                                        fieldsInfo["recurrenceId"]?.fieldTitle || "TITLE.Recurrence_ID"
                                      }}</label>
                                      <input
                                        matInput
                                        type="number"
                                        [(ngModel)]="dataModel.recurrenceId"
                                        name="dataModel.recurrenceId"
                                        #RecurrenceId
                                        placeholder="{{ 'TITLE.Recurrence_ID' | translate }}"
                                        [disabled]="!fieldsInfo['recurrenceId']?.accessAddField"
                                        class="form-control validate-name"
                                        id="dataModel.recurrenceId"
                                        />
                                      </div>
                                      <!-- ReminderMinutes Field -->
                                      <div
                                        class="input-style has-borders no-icon input-style-always-active validate-field mb-4"
                                        >
                                        <label for="dataModel.reminderMinutes" class="color-highlight">{{
                                          fieldsInfo["reminderMinutes"]?.fieldTitle || "TITLE.Reminder_Minutes"
                                        }}</label>
                                        <input
                                          matInput
                                          type="number"
                                          [(ngModel)]="dataModel.reminderMinutes"
                                          name="dataModel.reminderMinutes"
                                          #ReminderMinutes
                                          placeholder="{{ 'TITLE.Reminder_Minutes' | translate }}"
                                          [disabled]="!fieldsInfo['reminderMinutes']?.accessAddField"
                                          class="form-control validate-name"
                                          id="dataModel.reminderMinutes"
                                          />
                                        </div>
                                        <!-- ReminderTime Field -->
                                        <div
                                          class="input-style has-borders no-icon input-style-always-active validate-field mb-4"
                                          >
                                          <label for="dataModel.reminderTime" class="color-highlight">{{
                                            fieldsInfo["reminderTime"]?.fieldTitle || "TITLE.Reminder_Time"
                                          }}</label>
                                          <input
                                            matInput
                                            type="number"
                                            [(ngModel)]="dataModel.reminderTime"
                                            name="dataModel.reminderTime"
                                            #ReminderTime
                                            placeholder="{{ 'TITLE.Reminder_Time' | translate }}"
                                            [disabled]="!fieldsInfo['reminderTime']?.accessAddField"
                                            class="form-control validate-name"
                                            id="dataModel.reminderTime"
                                            />
                                          </div>
                                          <!-- Visibility Field -->
                                          <div
                                            class="input-style has-borders no-icon input-style-always-active validate-field mb-4"
                                            >
                                            <label for="dataModel.visibility" class="color-highlight">{{
                                              fieldsInfo["visibility"]?.fieldTitle || "TITLE.Visibility"
                                            }}</label>
                                            <input
                                              matInput
                                              type="text"
                                              [(ngModel)]="dataModel.visibility"
                                              name="dataModel.visibility"
                                              #Visibility
                                              placeholder="{{ 'TITLE.Visibility' | translate }}"
                                              maxlength="50"
                                              [disabled]="!fieldsInfo['visibility']?.accessAddField"
                                              class="form-control validate-name"
                                              id="dataModel.visibility"
                                              />
                                            </div>
                                            <!-- SendNotification Field -->
                                            <div
                                              class="input-style has-borders no-icon input-style-always-active validate-field mb-4"
                                              >
                                              <label for="dataModel.sendNotification" class="color-highlight">{{
                                                fieldsInfo["sendNotification"]?.fieldTitle || "TITLE.Send_Notification"
                                              }}</label>
                                              <input
                                                matInput
                                                type="checkbox"
                                                [(ngModel)]="dataModel.sendNotification"
                                                name="dataModel.sendNotification"
                                                #SendNotification
                                                [disabled]="!fieldsInfo['sendNotification']?.accessAddField"
                                                class="form-control validate-name"
                                                id="dataModel.sendNotification"
                                                />
                                              </div>
                                              <!-- NoTime Field -->
                                              <div
                                                class="input-style has-borders no-icon input-style-always-active validate-field mb-4"
                                                >
                                                <label for="dataModel.noTime" class="color-highlight">{{
                                                  fieldsInfo["noTime"]?.fieldTitle || "TITLE.No_Time"
                                                }}</label>
                                                <input
                                                  matInput
                                                  type="checkbox"
                                                  [(ngModel)]="dataModel.noTime"
                                                  name="dataModel.noTime"
                                                  #NoTime
                                                  [disabled]="!fieldsInfo['noTime']?.accessAddField"
                                                  class="form-control validate-name"
                                                  id="dataModel.noTime"
                                                  />
                                                </div>
                                                <!-- Submit Button -->
                    <div class="form-button-group">
                      <button
                        type="submit"
                        [disabled]="formInfo.submitButtonEnabled == false"
                        class="btn btn-m btn-full mb-4 rounded-s shadow-l bg-green-dark"
                        >
                        {{ "ACTION.SAVE" | translate }}
                      </button>
                      <button
                        type="button"
                        (click)="onFormCancel()"
                        class="btn btn-m btn-full mb-4 rounded-s shadow-l bg-red-dark"
                        >
                        {{ "ACTION.CANCEL" | translate }}
                      </button>
                    </div>
                  </form>
                </div>
              </div>

