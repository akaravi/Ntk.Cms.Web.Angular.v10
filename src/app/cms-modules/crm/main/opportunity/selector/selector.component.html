<div
  class="input-style has-borders has-icon input-style-always-active validate-field mb-4 loader-container"
>
  <app-progress-spinner [optionsInfoAreaId]="constructorInfoAreaId">
  </app-progress-spinner>
  <span matPrefix>&nbsp;</span>

  <input
    type="text"
    placeholder="{{ optionPlaceholder }}"
    [attr.disabled]="optionDisabled ? true : null"
    aria-label="Opportunity"
    matInput
    [formControl]="formControl"
    [matAutocomplete]="matauto"
    [required]="optionRequired"
  />
  <label for="forminput" class="color-highlight">{{ optionLabel }}</label>
  <mat-autocomplete
    #matauto="matAutocomplete"
    [displayWith]="displayFn"
    (optionSelected)="onActionSelect($event.option.value)"
  >
    @for (state of filteredOptions | async; track state) {
      <mat-option [value]="state" [disabled]="optionDisabled">
        <span>{{ displayOption(state) }}</span>
      </mat-option>
    }
  </mat-autocomplete>
  @if (!formControl.valid) {
    <i class="fa fa-info invalid color-red-dark"></i>
  }
  @if (optionRequired && formControl.valid) {
    <i class="fa fa-check valid color-green-dark"></i>
  }
  @if (dataModelSelect?.id?.length > 0) {
    <i
      class="fa fa-times action color-red-dark"
      (click)="onActionButtonClear()"
    ></i>
  }
  <i
    class="fa fa-rotate-right action color-green-dark"
    style="margin-left: 20px"
    title="{{ 'ACTION.RELOAD' | translate }}"
    [class.rotation360]="
      publicHelper.processService.process.inRunArea[constructorInfoAreaId]
    "
    (click)="onActionButtonReload()"
  ></i>
  @if (
    optionRequired &&
    (!dataModelSelect || !dataModelSelect.id || dataModelSelect.id.length <= 0)
  ) {
    <em>({{ "TITLE.Necessary" | translate }})</em>
  }
  <ng-content></ng-content>
</div>

