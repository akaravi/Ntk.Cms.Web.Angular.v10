<app-cms-html-list [optionsListInfoAreaId]="constructorInfoAreaId">
  <ng-container cms-action-header-start>
    <a
      type="button"
      class="btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-highlight"
      (click)="onActionButtonReload()"
    >
      <i
        class="fa-solid fa-rotate-right font-18"
        [class.rotation360]="
          publicHelper.processService.process.inRunArea[constructorInfoAreaId]
        "
      ></i>
    </a>
  </ng-container>
  <ng-container cms-action-header-end>
    <a
      (click)="optionsSearch.data.show = !optionsSearch.data.show"
      class="btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-highlight"
    >
      <mat-slide-toggle [checked]="optionsSearch.data.show"></mat-slide-toggle>
      {{ "ACTION.SEARCH" | translate }}
    </a>
    <a
      (click)="onActionButtonStatist()"
      class="btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-highlight"
    >
      <mat-slide-toggle [checked]="optionsStatist.data.show">
      </mat-slide-toggle>
      {{ "ACTION.STATIST" | translate }}
    </a>
  </ng-container>
  <ng-container cms-action-main>
    @if (dataModelResult?.access?.accessAddRow) {
      <a
        (click)="onActionbuttonNewRow()"
        type="button"
        class="btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-teal"
        ><i class="fa-solid fa-plus font-18"></i> {{ "ACTION.ADD" | translate }}
      </a>
    }
  </ng-container>
  <ng-container cms-action-row>
    @if (dataModelResult?.access?.accessEditRow) {
      <a
        (click)="onActionbuttonEditRow(tableRowSelected)"
        class="btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-magenta"
        ><i class="fa-solid fa-pen font-18"></i> {{ "ACTION.EDIT" | translate }}
      </a>
    }
    @if (dataModelResult?.access?.accessDeleteRow) {
      <a
        (click)="onActionbuttonDeleteRow(tableRowSelected)"
        class="btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-red"
        ><i class="fa-solid fa-trash font-18"></i>
        {{ "ACTION.DELETE" | translate }}
      </a>
    }
  </ng-container>
  <ng-container cms-action-area>
    <app-cms-search-list [(options)]="optionsSearch"></app-cms-search-list>
    <app-cms-statist-list [(options)]="optionsStatist"></app-cms-statist-list>
  </ng-container>
  <ng-container cms-body>
    <mat-table
      [dataSource]="tableSource"
      matSort
      #tableSort="matSort"
      (matSortChange)="onTableSortData(tableSort)"
    >
      <ng-container matColumnDef="id">
        <mat-header-cell *matHeaderCellDef mat-sort-header="id">
          ID
        </mat-header-cell>
        <mat-cell *matCellDef="let row">
          {{ row.id }}
          <button
            type="button"
            mat-icon-button
            [cdkCopyToClipboard]="row.id"
            (click)="onActionCopied()"
            aria-label="copy-id"
          >
            <mat-icon>content_copy</mat-icon>
          </button>
        </mat-cell>
      </ng-container>
      <ng-container matColumnDef="title">
        <mat-header-cell *matHeaderCellDef mat-sort-header="title">
          {{ "TITLE.Title" | translate }}
        </mat-header-cell>
        <mat-cell *matCellDef="let row">{{ row.title }}</mat-cell>
      </ng-container>
      <ng-container matColumnDef="linkSourcePathId">
        <mat-header-cell *matHeaderCellDef mat-sort-header="linkSourcePathId">
          {{ "TITLE.SOURCEPATH" | translate }}
        </mat-header-cell>
        <mat-cell *matCellDef="let row">{{ row.linkSourcePathId }}</mat-cell>
      </ng-container>
      <ng-container matColumnDef="servicePricePerPage">
        <mat-header-cell *matHeaderCellDef mat-sort-header="servicePricePerPage">
          {{ "TITLE.SERVICE_PRICE_PER_PAGE" | translate }}
        </mat-header-cell>
        <mat-cell *matCellDef="let row">
          {{ row.servicePricePerPage | number }}
        </mat-cell>
      </ng-container>
      <ng-container matColumnDef="endUserPricePerPage">
        <mat-header-cell
          *matHeaderCellDef
          mat-sort-header="endUserPricePerPage"
        >
          {{ "TITLE.ENDUSER_PRICE_PER_PAGE" | translate }}
        </mat-header-cell>
        <mat-cell *matCellDef="let row">
          {{ row.endUserPricePerPage | number }}
        </mat-cell>
      </ng-container>
      <!-- RecordStatus Column -->
      <ng-container matColumnDef="recordStatus">
        <mat-header-cell *matHeaderCellDef mat-sort-header>
          {{ fieldsInfo["recordStatus"]?.fieldTitle }}
        </mat-header-cell>
        <mat-cell
          *matCellDef="let row"
          [ngClass]="row.recordStatus | statusCellClass"
        >
          <i [ngClass]="row.recordStatus | statusIconClass"></i>
        </mat-cell>
      </ng-container>
      <!-- Action Column -->
      <ng-container matColumnDef="action">
        <mat-header-cell *matHeaderCellDef>
          {{ "TITLE.OPTION" | translate }}
        </mat-header-cell>
        <mat-cell *matCellDef="let row" class="Action">
          <button
            type="button"
            mat-icon-button
            [matMenuTriggerFor]="actionMenu"
            aria-label="Action Menu"
          >
            <mat-icon>more_vert</mat-icon>
          </button>
          <mat-menu #actionMenu="matMenu"> </mat-menu>
        </mat-cell>
      </ng-container>
      <mat-header-row *matHeaderRowDef="tabledisplayedColumns"></mat-header-row>
      <mat-row
        *matRowDef="let row; columns: tabledisplayedColumns"
        (click)="onActionTableRowSelect(row)"
        [class.ntk-table-row-selected]="tableRowSelected?.id === row.id"
      ></mat-row>
    </mat-table>
    <mat-paginator
      [length]="dataModelResult.totalRowCount"
      [pageSize]="filteModelContent.rowPerPage"
      [pageSizeOptions]="[10, 20, 50, 100]"
      (page)="onTablePageingData($event)"
    ></mat-paginator>
  </ng-container>
</app-cms-html-list>
