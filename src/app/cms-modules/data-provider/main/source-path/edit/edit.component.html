<div class="card card-style loader-container">
  <app-progress-spinner [optionsInfoAreaId]="constructorInfoAreaId">
  </app-progress-spinner>
  <div class="content mb-0">
    <p class="mb-0 color-highlight font-600 font-12">
      {{ formInfo.formTitle }}
    </p>
    <h4>{{ "TITLE.ROUTE_SETTINGS" | translate }}</h4>
    <p>
      {{ "TITLE.ROUTE_SETTINGS_DESCRIPTION" | translate }}
    </p>
    <!--content-->
    <app-cms-form-result-message
      [formInfo]="formInfo"
    ></app-cms-form-result-message>
    <form (ngSubmit)="onFormSubmit()" #vform="ngForm">
      <mat-vertical-stepper
        (selectionChange)="onStepClick($event, stepper)"
        #stepper
      >
        <mat-step
          label="{{ 'TITLE.REQUIRED_INFORMATION' | translate }}"
          state="main"
        >
          <!-- RecordStatus Field -->
          @if (fieldsInfo["recordStatus"]?.accessWatchField) {
            <app-cms-enum-record-status-selector
              [(model)]="dataModel.recordStatus"
              [optionDisabled]="
                !(fieldsInfo['recordStatus']?.accessEditField ?? false)
              "
              [optionLabel]="fieldsInfo['recordStatus']?.fieldTitle"
              [optionRequired]="true"
              [optionSelectFirstItem]="true"
            ></app-cms-enum-record-status-selector>
          }

          <!-- Title Field -->
          @if (fieldsInfo["title"]?.accessWatchField) {
            <div
              class="input-style has-borders no-icon input-style-always-active validate-field mb-4"
            >
              <label for="dataModel.title" class="color-highlight">{{
                fieldsInfo["title"]?.fieldTitle
              }}</label>
              <input
                matInput
                type="text"
                [(ngModel)]="dataModel.title"
                name="dataModel.title"
                #Title
                type="text"
                placeholder="{{ fieldsInfo['title']?.fieldTitle }}"
                [disabled]="!fieldsInfo['title']?.accessEditField"
                minlength="3"
                maxlength="100"
                required
                class="form-control validate-name"
                id="dataModel.title"
              />
              @if (!Title.value) {
                <i class="fa fa-times invalid color-red-dark"></i>
              }
              @if (Title.value) {
                <i class="fa fa-check valid color-green-dark"></i>
              }
              <em>{{ Title.value.length }} / 100</em>
              @if (Title.errors?.required) {
                <mat-error>
                  Title is <strong>{{ "MESSAGE.required" | translate }}</strong>
                </mat-error>
              }
            </div>
          }
          <!-- LinkPublicConfigId Field -->
          <app-data-provider-source-public-config-selector
            (optionChange)="onActionSelectSource($event)"
            [optionDisabled]="
              !fieldsInfo['linkPublicConfigId']?.accessEditField
            "
            [optionSelectForce]="dataModel.linkPublicConfigId"
            [optionPlaceholder]="'TITLE.Route_Type' | translate"
          >
          </app-data-provider-source-public-config-selector>
          <!-- linkSourceCompanyId Field -->
          <app-data-provider-source-company-selector
            (optionChange)="onActionSelectorSelectlinkSourceCompanyId($event)"
            [optionSelectForce]="dataModel.linkSourceCompanyId"
            [optionPlaceholder]="'TITLE.Service_Company' | translate"
          >
          </app-data-provider-source-company-selector>
          <!-- ApiIdentity Field -->
          @if (fieldsInfo["apiIdentity"]?.accessWatchField) {
            <div
              class="input-style has-borders no-icon input-style-always-active validate-field mb-4"
            >
              <label for="dataModel.apiIdentity" class="color-highlight">{{
                fieldsInfo["apiIdentity"]?.fieldTitle
              }}</label>
              <input
                matInput
                [(ngModel)]="dataModel.apiIdentity"
                name="dataModel.apiIdentity"
                #ApiIdentity
                type="number"
                placeholder="1"
                [disabled]="!fieldsInfo['apiIdentity']?.accessEditField"
                class="form-control validate-name"
                id="dataModel.apiIdentity"
              />
            </div>
          }
          <!-- apiMinPathNeedToCheck Field -->
          @if (fieldsInfo["apiMinPathNeedToCheck"]?.accessWatchField) {
            <div
              class="input-style has-borders no-icon input-style-always-active validate-field mb-4"
            >
              <label
                for="dataModel.apiMinPathNeedToCheck"
                class="color-highlight"
                >{{ fieldsInfo["apiMinPathNeedToCheck"]?.fieldTitle }}</label
              >
              <input
                matInput
                [(ngModel)]="dataModel.apiMinPathNeedToCheck"
                name="dataModel.apiMinPathNeedToCheck"
                #ApiMinPathNeedToCheck
                type="number"
                placeholder="1"
                [disabled]="
                  !fieldsInfo['apiMinPathNeedToCheck']?.accessEditField
                "
                class="form-control validate-name"
                id="dataModel.apiMinPathNeedToCheck"
              />
            </div>
          }
          <!-- ApiReceiveKey Field -->
          @if (fieldsInfo["apiReceiveKey"]?.accessWatchField) {
            <div
              class="input-style has-borders no-icon input-style-always-active validate-field mb-4"
            >
              <label for="dataModel.apiReceiveKey" class="color-highlight">{{
                fieldsInfo["apiReceiveKey"]?.fieldTitle
              }}</label>
              <input
                matInput
                [(ngModel)]="dataModel.apiReceiveKey"
                name="dataModel.apiReceiveKey"
                #ApiReceiveKey
                type="text"
                placeholder="1"
                [disabled]="!fieldsInfo['apiReceiveKey']?.accessEditField"
                class="form-control validate-name"
                id="dataModel.apiReceiveKey"
              />
            </div>
          }
          <!-- hookAddressReceiveMessageAPIById Field -->
          @if (
            fieldsInfo["hookAddressReceiveMessageAPIById"]?.accessWatchField
          ) {
            <div
              class="input-style has-borders no-icon input-style-always-active validate-field mb-4"
            >
              <label
                for="dataModel.hookAddressReceiveMessageAPIById"
                class="color-highlight"
                >{{
                  fieldsInfo["hookAddressReceiveMessageAPIById"]?.fieldTitle
                }}</label
              >
              <input
                matInput
                [(ngModel)]="dataModel.hookAddressReceiveMessageAPIById"
                name="dataModel.hookAddressReceiveMessageAPIById"
                placeholder="https://"
                #hookAddressReceiveMessageAPIById
                type="text"
                readonly
                placeholder="1"
                class="form-control validate-name input-ltr"
                id="dataModel.hookAddressReceiveMessageAPIById"
              />
            </div>
          }

          <!-- hookAddressReceiveDeliveryStatusAPIById Field -->
          @if (
            fieldsInfo["hookAddressReceiveDeliveryStatusAPIById"]
              ?.accessWatchField
          ) {
            <div
              class="input-style has-borders no-icon input-style-always-active validate-field mb-4"
            >
              <label
                for="dataModel.hookAddressReceiveDeliveryStatusAPIById"
                class="color-highlight"
                >{{
                  fieldsInfo["hookAddressReceiveDeliveryStatusAPIById"]
                    ?.fieldTitle
                }}</label
              >
              <input
                matInput
                [(ngModel)]="dataModel.hookAddressReceiveDeliveryStatusAPIById"
                name="dataModel.hookAddressReceiveDeliveryStatusAPIById"
                placeholder="https://"
                #hookAddressReceiveDeliveryStatusAPIById
                type="text"
                readonly
                placeholder="1"
                class="form-control validate-name input-ltr"
                id="dataModel.hookAddressReceiveDeliveryStatusAPIById"
              />
            </div>
          }

          <!-- apiAbilityLengthMinToSend Field -->
          @if (fieldsInfo["apiAbilityLengthMinToSend"]?.accessWatchField) {
            <div
              class="input-style has-borders no-icon input-style-always-active validate-field mb-4"
            >
              <label
                for="dataModel.apiAbilityLengthMinToSend"
                class="color-highlight"
                >{{
                  fieldsInfo["apiAbilityLengthMinToSend"]?.fieldTitle
                }}</label
              >
              <input
                matInput
                [(ngModel)]="dataModel.apiAbilityLengthMinToSend"
                name="dataModel.apiAbilityLengthMinToSend"
                #ApiAbilityLengthMinToSend
                type="number"
                placeholder="1"
                [disabled]="
                  !fieldsInfo['apiAbilityLengthMinToSend']?.accessEditField
                "
                class="form-control validate-name"
                id="dataModel.apiAbilityLengthMinToSend"
              />
            </div>
          }
          <!-- apiAbilityLengthMaxToSend Field -->
          @if (fieldsInfo["apiAbilityLengthMaxToSend"]?.accessWatchField) {
            <div
              class="input-style has-borders no-icon input-style-always-active validate-field mb-4"
            >
              <label
                for="dataModel.apiAbilityLengthMaxToSend"
                class="color-highlight"
                >{{
                  fieldsInfo["apiAbilityLengthMaxToSend"]?.fieldTitle
                }}</label
              >
              <input
                matInput
                [(ngModel)]="dataModel.apiAbilityLengthMaxToSend"
                name="dataModel.apiAbilityLengthMaxToSend"
                #ApiAbilityLengthMaxToSend
                type="number"
                placeholder="1"
                [disabled]="
                  !fieldsInfo['apiAbilityLengthMaxToSend']?.accessEditField
                "
                class="form-control validate-name"
                id="dataModel.apiAbilityLengthMaxToSend"
              />
            </div>
          }
          <!-- Priority Field -->
          @if (fieldsInfo["priority"]?.accessWatchField) {
            <div
              class="input-style has-borders no-icon input-style-always-active validate-field mb-4"
            >
              <label for="dataModel.priority" class="color-highlight">{{
                fieldsInfo["priority"]?.fieldTitle
              }}</label>
              <input
                matInput
                [(ngModel)]="dataModel.priority"
                name="dataModel.priority"
                #Priority
                type="number"
                placeholder="1"
                [disabled]="!fieldsInfo['priority']?.accessEditField"
                class="form-control validate-name"
                id="dataModel.priority"
              />
            </div>
          }
          <!-- MaxProcessFlowAmount Field -->
          @if (fieldsInfo["maxProcessFlowAmount"]?.accessWatchField) {
            <div
              class="input-style has-borders no-icon input-style-always-active validate-field mb-4"
            >
              <label
                for="dataModel.maxProcessFlowAmount"
                class="color-highlight"
                >{{ fieldsInfo["maxProcessFlowAmount"]?.fieldTitle }}</label
              >
              <input
                matInput
                [(ngModel)]="dataModel.maxProcessFlowAmount"
                name="dataModel.maxProcessFlowAmount"
                #MaxProcessFlowAmount
                type="number"
                placeholder="1"
                [disabled]="
                  !fieldsInfo['maxProcessFlowAmount']?.accessEditField
                "
                class="form-control validate-name"
                id="dataModel.maxProcessFlowAmount"
              />
            </div>
          }
          <!-- MinProcessFlowAmount Field -->
          @if (fieldsInfo["minProcessFlowAmount"]?.accessWatchField) {
            <div
              class="input-style has-borders no-icon input-style-always-active validate-field mb-4"
            >
              <label
                for="dataModel.minProcessFlowAmount"
                class="color-highlight"
                >{{ fieldsInfo["minProcessFlowAmount"]?.fieldTitle }}</label
              >
              <input
                matInput
                [(ngModel)]="dataModel.minProcessFlowAmount"
                name="dataModel.minProcessFlowAmount"
                #MinProcessFlowAmount
                type="number"
                placeholder="Min Transaction Amount"
                [disabled]="
                  !fieldsInfo['minProcessFlowAmount']?.accessEditField
                "
                class="form-control validate-name"
                id="dataModel.minProcessFlowAmount"
              />
            </div>
          }
          <!-- FixFeeProcessFlowAmount Field -->
          @if (fieldsInfo["fixFeeProcessFlowAmount"]?.accessWatchField) {
            <div
              class="input-style has-borders no-icon input-style-always-active validate-field mb-4"
            >
              <label
                for="dataModel.fixFeeProcessFlowAmount"
                class="color-highlight"
                >{{ fieldsInfo["fixFeeProcessFlowAmount"]?.fieldTitle }}</label
              >
              <input
                matInput
                [(ngModel)]="dataModel.fixFeeProcessFlowAmount"
                name="dataModel.fixFeeProcessFlowAmount"
                #FixFeeProcessFlowAmount
                type="number"
                placeholder="Max Transaction Amount"
                [disabled]="
                  !fieldsInfo['fixFeeProcessFlowAmount']?.accessEditField
                "
                class="form-control validate-name"
                id="dataModel.fixFeeProcessFlowAmount"
              />
            </div>
          }
          <!-- PercentFeeProcessFlowAmount Field -->
          @if (fieldsInfo["percentFeeProcessFlowAmount"]?.accessWatchField) {
            <div
              class="input-style has-borders no-icon input-style-always-active validate-field mb-4"
            >
              <label
                for="dataModel.percentFeeProcessFlowAmount"
                class="color-highlight"
                >{{
                  fieldsInfo["percentFeeProcessFlowAmount"]?.fieldTitle
                }}</label
              >
              <input
                matInput
                [(ngModel)]="dataModel.percentFeeProcessFlowAmount"
                name="dataModel.percentFeeProcessFlowAmount"
                #PercentFeeProcessFlowAmount
                type="number"
                placeholder="Percent Fee Transaction Amount"
                [disabled]="
                  !fieldsInfo['percentFeeProcessFlowAmount']?.accessEditField
                "
                class="form-control validate-name"
                id="dataModel.percentFeeProcessFlowAmount"
              />
            </div>
          }
          <!-- PerriodStartWorkTime Field -->
          @if (fieldsInfo["perriodStartWorkTime"]?.accessWatchField) {
            <div
              class="input-style has-borders no-icon input-style-always-active validate-field mb-4 cms-input-group"
            >
              <label
                for="dataModel.perriodStartWorkTime"
                class="color-highlight"
                >{{ fieldsInfo["perriodStartWorkTime"]?.fieldTitle }}</label
              >
              <input
                matInput
                [ngxTimepicker]="PerriodStartWorkTime"
                [(ngModel)]="dataModel.perriodStartWorkTime"
                [format]="24"
                name="dataModel.perriodStartWorkTime"
                class="form-control validate-name"
                id="dataModel.perriodStartWorkTime"
              />
              <ngx-material-timepicker-toggle
                matSuffix
                [for]="PerriodStartWorkTime"
              ></ngx-material-timepicker-toggle>
              <ngx-material-timepicker
                touchUi
                #PerriodStartWorkTime
                class="timepicker"
              ></ngx-material-timepicker>
            </div>
          }
          <!-- PerriodEndWorkTime Field -->
          @if (fieldsInfo["perriodEndWorkTime"]?.accessWatchField) {
            <div
              class="input-style has-borders no-icon input-style-always-active validate-field mb-4 cms-input-group"
            >
              <label
                for="dataModel.perriodEndWorkTime"
                class="color-highlight"
                >{{ fieldsInfo["perriodEndWorkTime"]?.fieldTitle }}</label
              >
              <input
                matInput
                [ngxTimepicker]="PerriodEndWorkTime"
                [(ngModel)]="dataModel.perriodEndWorkTime"
                name="dataModel.perriodEndWorkTime"
                type="number"
                [format]="24"
                class="form-control validate-name"
                id="dataModel.perriodEndWorkTime"
              />
              <ngx-material-timepicker-toggle
                matSuffix
                [for]="PerriodEndWorkTime"
              ></ngx-material-timepicker-toggle>
              <ngx-material-timepicker
                touchUi
                #PerriodEndWorkTime
                class="timepicker"
              ></ngx-material-timepicker>
            </div>
          }
          <!-- Description Field -->
          <div
            class="input-style has-borders no-icon input-style-always-active validate-field mb-4"
          >
            <label for="dataModel.description" class="color-highlight">{{
              fieldsInfo["description"]?.fieldTitle
            }}</label>
            <textarea
              matInput
              [(ngModel)]="dataModel.description"
              name="dataModel.description"
              #Description
              type="text"
              placeholder="{{ fieldsInfo['description']?.fieldTitle }}"
              minlength="1"
              maxlength="500"
              rows="5"
              id="dataModel.description"
              class="form-control validate-name"
            ></textarea>
            <em>{{ Description.value.length }} / 500</em>
            @if (Description.errors?.required) {
              <mat-error>
                Description is
                <strong>{{ "MESSAGE.required" | translate }}</strong>
              </mat-error>
            }
          </div>
          <!-- Memo Field -->
          <div
            class="input-style has-borders no-icon input-style-always-active validate-field mb-4"
          >
            <label for="dataModel.memo" class="color-highlight">{{
              fieldsInfo["memo"]?.fieldTitle
            }}</label>
            <textarea
              matInput
              [(ngModel)]="dataModel.memo"
              name="dataModel.memo"
              type="text"
              placeholder="{{ fieldsInfo['description']?.fieldTitle }}"
              minlength="1"
              maxlength="500"
              rows="5"
              id="dataModel.memo"
              class="form-control validate-name"
            >
            </textarea>
          </div>
          @if (formInfo.submitButtonEnabled) {
            <div class="form-actions">
              <button
                type="button"
                class="btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-gray"
                (click)="onActionBackToParent()"
              >
                {{ "ACTION.BACK" | translate }}
              </button>
              <button
                type="button"
                class="btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-blue"
                [disabled]="!vform.form.valid"
                matStepperNext
              >
                {{ "ACTION.NEXT" | translate }}
              </button>
              <button
                type="submit"
                class="btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-green"
                [disabled]="!vform.form.valid"
              >
                {{ "ACTION.SAVE" | translate }}
              </button>
            </div>
          }
        </mat-step>

        <mat-step
          label="{{ 'TITLE.Dispatch_variables' | translate }}"
          state="seo"
        >
          <p>{{ "TITLE.Port_settings" | translate }}</p>
          <!-- privateConfigJsonFormatter Field -->
          <dynamic-form-builder-cms
            [formGroup]="vform.form"
            [(jsonValue)]="dataModel.privateConfigJsonValues"
            [propertiesInfos]="dataModel.privateConfigJsonFormatter"
          ></dynamic-form-builder-cms>
          @if (formInfo.submitButtonEnabled) {
            <div class="ntk-button-row">
              <button
                type="button"
                class="btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-yellow"
                (click)="onActionButtonGetToken()"
              >
                {{ "ACTION.CHECK_ROUTE_TOKEN" | translate }}
              </button>
              <button
                type="button"
                class="btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-yellow"
                (click)="onActionButtonGetBalance()"
              >
                {{ "ACTION.CHECK_ROUTE_BALANCE" | translate }}
              </button>
              <br />
              <button
                type="button"
                class="btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-gray"
                (click)="onActionBackToParent()"
              >
                {{ "ACTION.BACK" | translate }}
              </button>
              <button
                type="button"
                class="btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-blue"
                matStepperPrevious
              >
                {{ "ACTION.BEFOR" | translate }}
              </button>
              <button
                type="button"
                class="btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-blue"
                [disabled]="!vform.form.valid"
                matStepperNext
              >
                {{ "ACTION.NEXT" | translate }}
              </button>
              <button
                type="submit"
                class="btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-green"
                [disabled]="!vform.form.valid"
              >
                {{ "ACTION.SAVE" | translate }}
              </button>
            </div>
          }
        </mat-step>

        <mat-step
          label="{{ 'TITLE.Api_path_send_variables' | translate }}"
          state="seo"
        >
          <p>{{ "TITLE.Set_acess" | translate }}</p>
          <!-- apiSendMessageIsOn Field -->
          @if (fieldsInfo["apiSendMessageIsOn"]?.accessWatchField) {
            <div class="d-flex mb-3">
              <div class="pt-1">
                <h5
                  data-trigger-switch="dataModel.apiSendMessageIsOn"
                  class="font-600 font-14"
                >
                  {{ fieldsInfo["apiSendMessageIsOn"]?.fieldTitle }}
                </h5>
              </div>
              <div class="ms-auto me-3 pe-2">
                <div class="custom-control ios-switch small-switch">
                  <input
                    type="checkbox"
                    class="ios-input"
                    id="dataModel.apiSendMessageIsOn"
                    [(ngModel)]="dataModel.apiSendMessageIsOn"
                    name="dataModel.apiSendMessageIsOn"
                  />
                  <label
                    class="custom-control-label"
                    for="dataModel.apiSendMessageIsOn"
                  ></label>
                </div>
              </div>
            </div>
          }
          <!-- apiSendMessageAddTextFirst Field -->
          <div
            class="input-style has-borders no-icon input-style-always-active validate-field mb-4"
          >
            <label
              for="dataModel.apiSendMessageAddTextFirst"
              class="color-highlight"
              >{{ fieldsInfo["apiSendMessageAddTextFirst"]?.fieldTitle }}</label
            >
            <textarea
              matInput
              [(ngModel)]="dataModel.apiSendMessageAddTextFirst"
              name="dataModel.apiSendMessageAddTextFirst"
              #apiSendMessageAddTextFirst
              type="text"
              placeholder="{{
                fieldsInfo['apiSendMessageAddTextFirst']?.fieldTitle
              }}"
              minlength="1"
              maxlength="500"
              rows="5"
              id="dataModel.apiSendMessageAddTextFirst"
              class="form-control validate-name"
            ></textarea>
            <em>{{ apiSendMessageAddTextFirst.value.length }} / 500</em>
            @if (apiSendMessageAddTextFirst.errors?.required) {
              <mat-error>
                apiSendMessageAddTextFirst is
                <strong>{{ "MESSAGE.required" | translate }}</strong>
              </mat-error>
            }
          </div>
          <!-- apiSendMessageAddTextEnd Field -->
          <div
            class="input-style has-borders no-icon input-style-always-active validate-field mb-4"
          >
            <label
              for="dataModel.apiSendMessageAddTextEnd"
              class="color-highlight"
              >{{ fieldsInfo["apiSendMessageAddTextEnd"]?.fieldTitle }}</label
            >
            <textarea
              matInput
              [(ngModel)]="dataModel.apiSendMessageAddTextEnd"
              name="dataModel.apiSendMessageAddTextEnd"
              #apiSendMessageAddTextEnd
              type="text"
              placeholder="{{
                fieldsInfo['apiSendMessageAddTextEnd']?.fieldTitle
              }}"
              minlength="1"
              maxlength="500"
              rows="5"
              id="dataModel.apiSendMessageAddTextEnd"
              class="form-control validate-name"
            ></textarea>
            <em>{{ apiSendMessageAddTextEnd.value.length }} / 500</em>
            @if (apiSendMessageAddTextEnd.errors?.required) {
              <mat-error>
                apiSendMessageAddTextEnd is
                <strong>{{ "MESSAGE.required" | translate }}</strong>
              </mat-error>
            }
          </div>
          <!-- sendMessageAddTextFirst Field -->
          <div
            class="input-style has-borders no-icon input-style-always-active validate-field mb-4"
          >
            <label
              for="dataModel.sendMessageAddTextFirst"
              class="color-highlight"
              >{{ fieldsInfo["sendMessageAddTextFirst"]?.fieldTitle }}</label
            >
            <textarea
              matInput
              [(ngModel)]="dataModel.sendMessageAddTextFirst"
              name="dataModel.sendMessageAddTextFirst"
              #sendMessageAddTextFirst
              type="text"
              placeholder="{{
                fieldsInfo['sendMessageAddTextFirst']?.fieldTitle
              }}"
              minlength="1"
              maxlength="500"
              rows="5"
              id="dataModel.sendMessageAddTextFirst"
              class="form-control validate-name"
            ></textarea>
            <em>{{ sendMessageAddTextFirst.value.length }} / 500</em>
            @if (sendMessageAddTextFirst.errors?.required) {
              <mat-error>
                sendMessageAddTextFirst is
                <strong>{{ "MESSAGE.required" | translate }}</strong>
              </mat-error>
            }
          </div>
          <!-- sendMessageAddTextEnd Field -->
          <div
            class="input-style has-borders no-icon input-style-always-active validate-field mb-4"
          >
            <label
              for="dataModel.sendMessageAddTextEnd"
              class="color-highlight"
              >{{ fieldsInfo["sendMessageAddTextEnd"]?.fieldTitle }}</label
            >
            <textarea
              matInput
              [(ngModel)]="dataModel.sendMessageAddTextEnd"
              name="dataModel.sendMessageAddTextEnd"
              #sendMessageAddTextEnd
              type="text"
              placeholder="{{
                fieldsInfo['sendMessageAddTextEnd']?.fieldTitle
              }}"
              minlength="1"
              maxlength="500"
              rows="5"
              id="dataModel.sendMessageAddTextEnd"
              class="form-control validate-name"
            ></textarea>
            <em>{{ sendMessageAddTextEnd.value.length }} / 500</em>
            @if (sendMessageAddTextEnd.errors?.required) {
              <mat-error>
                sendMessageAddTextEnd is
                <strong>{{ "MESSAGE.required" | translate }}</strong>
              </mat-error>
            }
          </div>

          <!-- apiAbilitySendUnicodeMessage Field -->
          @if (fieldsInfo["apiAbilitySendUnicodeMessage"]?.accessWatchField) {
            <div class="d-flex mb-3">
              <div class="pt-1">
                <h5
                  data-trigger-switch="dataModel.apiAbilitySendUnicodeMessage"
                  class="font-600 font-14"
                >
                  {{ fieldsInfo["apiAbilitySendUnicodeMessage"]?.fieldTitle }}
                </h5>
              </div>
              <div class="ms-auto me-3 pe-2">
                <div class="custom-control ios-switch small-switch">
                  <input
                    type="checkbox"
                    class="ios-input"
                    id="dataModel.apiAbilitySendUnicodeMessage"
                    [(ngModel)]="dataModel.apiAbilitySendUnicodeMessage"
                    name="dataModel.apiAbilitySendUnicodeMessage"
                  />
                  <label
                    class="custom-control-label"
                    for="dataModel.apiAbilitySendUnicodeMessage"
                  ></label>
                </div>
              </div>
            </div>
          }
          <!-- apiAbilitySendNormalMessage Field -->
          @if (fieldsInfo["apiAbilitySendNormalMessage"]?.accessWatchField) {
            <div class="d-flex mb-3">
              <div class="pt-1">
                <h5
                  data-trigger-switch="dataModel.apiAbilitySendNormalMessage"
                  class="font-600 font-14"
                >
                  {{ fieldsInfo["apiAbilitySendNormalMessage"]?.fieldTitle }}
                </h5>
              </div>
              <div class="ms-auto me-3 pe-2">
                <div class="custom-control ios-switch small-switch">
                  <input
                    type="checkbox"
                    class="ios-input"
                    id="dataModel.apiAbilitySendNormalMessage"
                    [(ngModel)]="dataModel.apiAbilitySendNormalMessage"
                    name="dataModel.apiAbilitySendNormalMessage"
                  />
                  <label
                    class="custom-control-label"
                    for="dataModel.apiAbilitySendNormalMessage"
                  ></label>
                </div>
              </div>
            </div>
          }
          <!-- apiAllowSupersede Field -->
          @if (fieldsInfo["apiAllowSupersede"]?.accessWatchField) {
            <div class="d-flex mb-3">
              <div class="pt-1">
                <h5
                  data-trigger-switch="dataModel.apiAllowSupersede"
                  class="font-600 font-14"
                >
                  {{ fieldsInfo["apiAllowSupersede"]?.fieldTitle }}
                </h5>
              </div>
              <div class="ms-auto me-3 pe-2">
                <div class="custom-control ios-switch small-switch">
                  <input
                    type="checkbox"
                    class="ios-input"
                    id="dataModel.apiAllowSupersede"
                    [(ngModel)]="dataModel.apiAllowSupersede"
                    name="dataModel.apiAllowSupersede"
                  />
                  <label
                    class="custom-control-label"
                    for="dataModel.apiAllowSupersede"
                  ></label>
                </div>
              </div>
            </div>
          }
          <!-- apiAbilityUseWebservice Field -->
          @if (fieldsInfo["apiAbilityUseWebservice"]?.accessWatchField) {
            <div class="d-flex mb-3">
              <div class="pt-1">
                <h5
                  data-trigger-switch="dataModel.apiAbilityUseWebservice"
                  class="font-600 font-14"
                >
                  {{ fieldsInfo["apiAbilityUseWebservice"]?.fieldTitle }}
                </h5>
              </div>
              <div class="ms-auto me-3 pe-2">
                <div class="custom-control ios-switch small-switch">
                  <input
                    type="checkbox"
                    class="ios-input"
                    id="dataModel.apiAbilityUseWebservice"
                    [(ngModel)]="dataModel.apiAbilityUseWebservice"
                    name="dataModel.apiAbilityUseWebservice"
                  />
                  <label
                    class="custom-control-label"
                    for="dataModel.apiAbilityUseWebservice"
                  ></label>
                </div>
              </div>
            </div>
          }
          <!-- apiAbilityUseInside Field -->
          @if (fieldsInfo["apiAbilityUseInside"]?.accessWatchField) {
            <div class="d-flex mb-3">
              <div class="pt-1">
                <h5
                  data-trigger-switch="dataModel.apiAbilityUseInside"
                  class="font-600 font-14"
                >
                  {{ fieldsInfo["apiAbilityUseInside"]?.fieldTitle }}
                </h5>
              </div>
              <div class="ms-auto me-3 pe-2">
                <div class="custom-control ios-switch small-switch">
                  <input
                    type="checkbox"
                    class="ios-input"
                    id="dataModel.apiAbilityUseInside"
                    [(ngModel)]="dataModel.apiAbilityUseInside"
                    name="dataModel.apiAbilityUseInside"
                  />
                  <label
                    class="custom-control-label"
                    for="dataModel.apiAbilityUseInside"
                  ></label>
                </div>
              </div>
            </div>
          }

          @if (formInfo.submitButtonEnabled) {
            <div class="form-actions">
              <button
                type="button"
                class="btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-gray"
                (click)="onActionBackToParent()"
              >
                {{ "ACTION.BACK" | translate }}
              </button>
              <button
                type="button"
                class="btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-blue"
                matStepperPrevious
              >
                {{ "ACTION.BEFOR" | translate }}
              </button>
              <button
                type="button"
                class="btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-blue"
                [disabled]="!vform.form.valid"
                matStepperNext
              >
                {{ "ACTION.NEXT" | translate }}
              </button>
              <button
                type="submit"
                class="btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-green"
                [disabled]="!vform.form.valid"
              >
                {{ "ACTION.SAVE" | translate }}
              </button>
            </div>
          }
        </mat-step>

        @if (complatedView) {
          <mat-step
            label="{{ 'TITLE.Status_receiving_variables' | translate }}"
            state="seo"
          >
            <p>{{ "TITLE.Set_acess" | translate }}</p>
            @if (formInfo.submitButtonEnabled) {
              <div class="form-actions">
                <button
                  type="button"
                  class="btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-gray"
                  (click)="onActionBackToParent()"
                >
                  {{ "ACTION.BACK" | translate }}
                </button>
                <button
                  type="button"
                  class="btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-blue"
                  matStepperPrevious
                >
                  {{ "ACTION.BEFOR" | translate }}
                </button>
                <button
                  type="button"
                  class="btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-blue"
                  [disabled]="!vform.form.valid"
                  matStepperNext
                >
                  {{ "ACTION.NEXT" | translate }}
                </button>
                <button
                  type="submit"
                  class="btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-green"
                  [disabled]="!vform.form.valid"
                >
                  {{ "ACTION.SAVE" | translate }}
                </button>
              </div>
            }
          </mat-step>
        }

        <mat-step
          label="{{ 'TITLE.Credit_return_status' | translate }}"
          state="seo"
        >
          <!-- serverDeliveryCostBase Field -->
          @if (fieldsInfo["serverDeliveryCostBase"]?.accessWatchField) {
            <div class="d-flex mb-3">
              <div class="pt-1">
                <h5
                  data-trigger-switch="dataModel.serverDeliveryCostBase"
                  class="font-600 font-14"
                >
                  {{ fieldsInfo["serverDeliveryCostBase"]?.fieldTitle }}
                </h5>
              </div>
              <div class="ms-auto me-3 pe-2">
                <div class="custom-control ios-switch small-switch">
                  <input
                    type="checkbox"
                    class="ios-input"
                    id="dataModel.serverDeliveryCostBase"
                    [(ngModel)]="dataModel.serverDeliveryCostBase"
                    name="dataModel.serverDeliveryCostBase"
                  />
                  <label
                    class="custom-control-label"
                    for="dataModel.serverDeliveryCostBase"
                  ></label>
                </div>
              </div>
            </div>
          }
          <div class="divider mt-3 mb-3"></div>
          <!-- StatusOutOfServiceMonitorApiChar Field -->
          @if (
            fieldsInfo["statusOutOfServiceMonitorApiChar"]?.accessWatchField
          ) {
            <div
              class="input-style has-borders no-icon input-style-always-active validate-field mb-4"
            >
              <label
                for="dataModel.statusOutOfServiceMonitorApiChar"
                class="color-highlight"
                >{{
                  fieldsInfo["statusOutOfServiceMonitorApiChar"]?.fieldTitle
                }}</label
              >
              <input
                matInput
                [(ngModel)]="dataModel.statusOutOfServiceMonitorApiChar"
                name="dataModel.statusOutOfServiceMonitorApiChar"
                #StatusOutOfServiceMonitorApiChar
                type="number"
                placeholder="1"
                [disabled]="
                  !fieldsInfo['statusOutOfServiceMonitorApiChar']
                    ?.accessEditField
                "
                class="form-control validate-name"
                id="dataModel.statusOutOfServiceMonitorApiChar"
              />
            </div>
          }
          <!-- StatusOutOfServiceActive Field -->
          @if (fieldsInfo["statusOutOfServiceActive"]?.accessWatchField) {
            <div class="d-flex mb-3">
              <div class="pt-1">
                <h5
                  data-trigger-switch="dataModel.statusOutOfServiceActive"
                  class="font-600 font-14"
                >
                  {{ fieldsInfo["statusOutOfServiceActive"]?.fieldTitle }}
                </h5>
              </div>
              <div class="ms-auto me-3 pe-2">
                <div class="custom-control ios-switch small-switch">
                  <input
                    type="checkbox"
                    class="ios-input"
                    id="dataModel.statusOutOfServiceActive"
                    [(ngModel)]="dataModel.statusOutOfServiceActive"
                    name="dataModel.statusOutOfServiceActive"
                  />
                  <label
                    class="custom-control-label"
                    for="dataModel.statusOutOfServiceActive"
                  ></label>
                </div>
              </div>
            </div>
          }
          <!-- StatusOutOfServiceExpire Field -->
          <div
            class="input-style has-borders no-icon input-style-always-active validate-field mb-4 cms-input-group"
          >
            <label
              for="dataModel.statusOutOfServiceExpire"
              class="color-highlight"
              >{{ fieldsInfo["statusOutOfServiceExpire"]?.fieldTitle }}</label
            >
            <input
              matInput
              [matDatepicker]="StatusOutOfServiceExpire"
              [(ngModel)]="dataModel.statusOutOfServiceExpire"
              name="dataModel.statusOutOfServiceExpire"
              type="text"
              class="form-control validate-name"
              id="dataModel.statusOutOfServiceExpire"
            />
            <mat-datepicker-toggle
              matSuffix
              [for]="StatusOutOfServiceExpire"
            ></mat-datepicker-toggle>
            <mat-datepicker
              touchUi
              #StatusOutOfServiceExpire
              [calendarHeaderComponent]="datapickerHeader"
            ></mat-datepicker>
          </div>
          <!-- StatusNotStableMonitorApiChar Field -->
          @if (fieldsInfo["statusNotStableMonitorApiChar"]?.accessWatchField) {
            <div
              class="input-style has-borders no-icon input-style-always-active validate-field mb-4"
            >
              <label
                for="dataModel.statusNotStableMonitorApiChar"
                class="color-highlight"
                >{{
                  fieldsInfo["statusNotStableMonitorApiChar"]?.fieldTitle
                }}</label
              >
              <input
                matInput
                [(ngModel)]="dataModel.statusNotStableMonitorApiChar"
                name="dataModel.statusNotStableMonitorApiChar"
                #StatusNotStableMonitorApiChar
                type="number"
                placeholder="1"
                [disabled]="
                  !fieldsInfo['statusNotStableMonitorApiChar']?.accessEditField
                "
                class="form-control validate-name"
                id="dataModel.statusNotStableMonitorApiChar"
              />
            </div>
          }
          <!-- StatusNotStableActive Field -->
          @if (fieldsInfo["apiAbilityUseInside"]?.accessWatchField) {
            <div class="d-flex mb-3">
              <div class="pt-1">
                <h5
                  data-trigger-switch="dataModel.statusNotStableActive"
                  class="font-600 font-14"
                >
                  {{ fieldsInfo["apiAbilityUseInside"]?.fieldTitle }}
                </h5>
              </div>
              <div class="ms-auto me-3 pe-2">
                <div class="custom-control ios-switch small-switch">
                  <input
                    type="checkbox"
                    class="ios-input"
                    id="dataModel.statusNotStableActive"
                    [(ngModel)]="dataModel.statusNotStableActive"
                    name="dataModel.statusNotStableActive"
                  />
                  <label
                    class="custom-control-label"
                    for="dataModel.statusNotStableActive"
                  ></label>
                </div>
              </div>
            </div>
          }
          <!-- StatusNotStableExpire Field -->
          <div
            class="input-style has-borders no-icon input-style-always-active validate-field mb-4 cms-input-group"
          >
            <label
              for="dataModel.statusNotStableExpire"
              class="color-highlight"
              >{{ fieldsInfo["statusNotStableExpire"]?.fieldTitle }}</label
            >
            <input
              matInput
              [matDatepicker]="StatusNotStableExpire"
              [(ngModel)]="dataModel.statusNotStableExpire"
              name="dataModel.statusNotStableExpire"
              type="text"
              class="form-control validate-name"
              id="dataModel.statusNotStableExpire"
            />
            <mat-datepicker-toggle
              matSuffix
              [for]="StatusNotStableExpire"
            ></mat-datepicker-toggle>
            <mat-datepicker
              touchUi
              #StatusNotStableExpire
              [calendarHeaderComponent]="datapickerHeader"
            ></mat-datepicker>
          </div>
          <!-- StatusNotStableCount Field -->
          @if (fieldsInfo["statusNotStableCount"]?.accessWatchField) {
            <div
              class="input-style has-borders no-icon input-style-always-active validate-field mb-4"
            >
              <label
                for="dataModel.statusNotStableCount"
                class="color-highlight"
                >{{ fieldsInfo["statusNotStableCount"]?.fieldTitle }}</label
              >
              <input
                matInput
                [(ngModel)]="dataModel.statusNotStableCount"
                name="dataModel.statusNotStableCount"
                #StatusNotStableCount
                type="number"
                placeholder="1"
                [disabled]="
                  !fieldsInfo['statusNotStableCount']?.accessEditField
                "
                class="form-control validate-name"
                id="dataModel.statusNotStableCount"
              />
            </div>
          }
          <!-- StatusNotStableCountLimit Field -->
          @if (fieldsInfo["statusNotStableCountLimit"]?.accessWatchField) {
            <div
              class="input-style has-borders no-icon input-style-always-active validate-field mb-4"
            >
              <label
                for="dataModel.statusNotStableCountLimit"
                class="color-highlight"
                >{{
                  fieldsInfo["statusNotStableCountLimit"]?.fieldTitle
                }}</label
              >
              <input
                matInput
                [(ngModel)]="dataModel.statusNotStableCountLimit"
                name="dataModel.statusNotStableCountLimit"
                #StatusNotStableCountLimit
                type="number"
                placeholder="1"
                [disabled]="
                  !fieldsInfo['statusNotStableCountLimit']?.accessEditField
                "
                class="form-control validate-name"
                id="dataModel.statusNotStableCountLimit"
              />
            </div>
          }
          <!-- StatusNotStableRunForMin Field -->
          @if (fieldsInfo["statusNotStableRunForMin"]?.accessWatchField) {
            <div
              class="input-style has-borders no-icon input-style-always-active validate-field mb-4"
            >
              <label
                for="dataModel.statusNotStableRunForMin"
                class="color-highlight"
                >{{ fieldsInfo["statusNotStableRunForMin"]?.fieldTitle }}</label
              >
              <input
                matInput
                [(ngModel)]="dataModel.statusNotStableRunForMin"
                name="dataModel.statusNotStableRunForMin"
                #StatusNotStableRunForMin
                type="number"
                placeholder="1"
                [disabled]="
                  !fieldsInfo['statusNotStableRunForMin']?.accessEditField
                "
                class="form-control validate-name"
                id="dataModel.statusNotStableRunForMin"
              />
            </div>
          }
          @if (formInfo.submitButtonEnabled) {
            <div class="form-actions">
              <button
                type="button"
                class="btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-gray"
                (click)="onActionBackToParent()"
              >
                {{ "ACTION.BACK" | translate }}
              </button>
              <button
                type="button"
                class="btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-blue"
                matStepperPrevious
              >
                {{ "ACTION.BEFOR" | translate }}
              </button>
              <button
                type="button"
                class="btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-blue"
                [disabled]="!vform.form.valid"
                matStepperNext
              >
                {{ "ACTION.NEXT" | translate }}
              </button>
              <button
                type="submit"
                class="btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-green"
                [disabled]="!vform.form.valid"
              >
                {{ "ACTION.SAVE" | translate }}
              </button>
            </div>
          }
        </mat-step>

        @if (complatedView) {
          <mat-step
            label="{{ 'TITLE.Receiving_variables' | translate }}"
            state="seo"
          >
            @if (formInfo.submitButtonEnabled) {
              <div class="form-actions">
                <button
                  type="button"
                  class="btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-gray"
                  (click)="onActionBackToParent()"
                >
                  {{ "ACTION.BACK" | translate }}
                </button>
                <button
                  type="button"
                  class="btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-blue"
                  matStepperPrevious
                >
                  {{ "ACTION.BEFOR" | translate }}
                </button>
                <button
                  type="button"
                  class="btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-blue"
                  [disabled]="!vform.form.valid"
                  matStepperNext
                >
                  {{ "ACTION.NEXT" | translate }}
                </button>
                <button
                  type="submit"
                  class="btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-green"
                  [disabled]="!vform.form.valid"
                >
                  {{ "ACTION.SAVE" | translate }}
                </button>
              </div>
            }
          </mat-step>
        }
        @if (complatedView) {
          <mat-step
            label="{{ 'TITLE.Check_validity' | translate }}"
            state="seo"
          >
            @if (formInfo.submitButtonEnabled) {
              <div class="form-actions">
                <button
                  type="button"
                  class="btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-gray"
                  (click)="onActionBackToParent()"
                >
                  {{ "ACTION.BACK" | translate }}
                </button>
                <button
                  type="button"
                  class="btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-blue"
                  matStepperPrevious
                >
                  {{ "ACTION.BEFOR" | translate }}
                </button>
                <button
                  type="button"
                  class="btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-blue"
                  [disabled]="!vform.form.valid"
                  matStepperNext
                >
                  {{ "ACTION.NEXT" | translate }}
                </button>
                <button
                  type="button"
                  class="btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-yellow"
                  (click)="onActionButtonGetToken()"
                >
                  {{ "ACTION.CHECK_ROUTE_TOKEN" | translate }}
                </button>
                <button
                  type="button"
                  class="btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-yellow"
                  (click)="onActionButtonGetBalance()"
                >
                  {{ "ACTION.CHECK_ROUTE_BALANCE" | translate }}
                </button>
                <button
                  type="submit"
                  class="btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-green"
                  [disabled]="!vform.form.valid"
                >
                  {{ "ACTION.SAVE" | translate }}
                </button>
              </div>
            }
          </mat-step>
        }

        @if (complatedView) {
          <mat-step
            label=" {{
              'TITLE.Variables_for_sending_voice_messagesy' | translate
            }}"
            state="seo"
          >
            @if (formInfo.submitButtonEnabled) {
              <div class="form-actions">
                <button
                  type="button"
                  class="btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-gray"
                  (click)="onActionBackToParent()"
                >
                  {{ "ACTION.BACK" | translate }}
                </button>
                <button
                  type="button"
                  class="btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-blue"
                  matStepperPrevious
                >
                  {{ "ACTION.BEFOR" | translate }}
                </button>
                <button
                  type="button"
                  class="btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-blue"
                  [disabled]="!vform.form.valid"
                  matStepperNext
                >
                  {{ "ACTION.NEXT" | translate }}
                </button>
                <button
                  type="submit"
                  class="btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-green"
                  [disabled]="!vform.form.valid"
                >
                  {{ "ACTION.SAVE" | translate }}
                </button>
              </div>
            }
          </mat-step>
        }

        @if (complatedView) {
          <mat-step
            label="{{ 'TITLE.Error_variables' | translate }}"
            state="seo"
          >
            @if (formInfo.submitButtonEnabled) {
              <div class="form-actions">
                <button
                  type="button"
                  class="btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-gray"
                  (click)="onActionBackToParent()"
                >
                  {{ "ACTION.BACK" | translate }}
                </button>
                <button
                  type="button"
                  class="btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-blue"
                  matStepperPrevious
                >
                  {{ "ACTION.BEFOR" | translate }}
                </button>
                <button
                  type="submit"
                  class="btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-green"
                  [disabled]="!vform.form.valid"
                >
                  {{ "ACTION.SAVE" | translate }}
                </button>
              </div>
            }
          </mat-step>
        }

        <!-- Icon overrides. -->
        <ng-template matStepperIcon="main">
          <mat-icon>call_end</mat-icon>
        </ng-template>
        <ng-template matStepperIcon="seo">
          <mat-icon>call_end</mat-icon>
        </ng-template>
        <ng-template matStepperIcon="file">
          <mat-icon>forum</mat-icon>
        </ng-template>
        <ng-template matStepperIcon="loaction">
          <mat-icon>forum</mat-icon>
        </ng-template>
      </mat-vertical-stepper>
    </form>

    <!--content-->
  </div>
</div>
